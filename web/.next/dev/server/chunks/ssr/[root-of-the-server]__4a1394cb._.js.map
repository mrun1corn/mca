{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/robin/mca/web/src/components/Panel.tsx"],"sourcesContent":["import { ReactNode } from \"react\";\n\ntype Props = {\n  title?: ReactNode;\n  description?: ReactNode;\n  actions?: ReactNode;\n  children: ReactNode;\n  className?: string;\n};\n\nexport default function Panel({ title, description, actions, children, className = \"\" }: Props) {\n  return (\n    <section\n      className={`rounded-2xl border border-[#EADAFB]/70 dark:border-[#2b1f4a] bg-gradient-to-br from-[#FFFFFF] via-[#FCEBFF]/80 to-[#FED2E2]/70 dark:from-[#23143E]/90 dark:via-[#1C1033]/70 dark:to-[#120A23]/70 p-5 shadow-md transition-shadow hover:shadow-xl ${className}`.trim()}\n    >\n      {(title || description || actions) && (\n        <header className=\"mb-4 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between\">\n          <div>\n            {title ? <h2 className=\"text-base sm:text-lg font-semibold text-slate-900 dark:text-white\">{title}</h2> : null}\n            {description ? <p className=\"text-sm text-slate-500 dark:text-slate-400\">{description}</p> : null}\n          </div>\n          {actions ? <div className=\"flex flex-wrap gap-2\">{actions}</div> : null}\n        </header>\n      )}\n      <div className=\"space-y-4\">{children}</div>\n    </section>\n  );\n}\n"],"names":[],"mappings":";;;;;;AAUe,SAAS,MAAM,EAAE,KAAK,EAAE,WAAW,EAAE,OAAO,EAAE,QAAQ,EAAE,YAAY,EAAE,EAAS;IAC5F,qBACE,8OAAC;QACC,WAAW,CAAC,iPAAiP,EAAE,WAAW,CAAC,IAAI;;YAE9Q,CAAC,SAAS,eAAe,OAAO,mBAC/B,8OAAC;gBAAO,WAAU;;kCAChB,8OAAC;;4BACE,sBAAQ,8OAAC;gCAAG,WAAU;0CAAqE;;;;;uCAAc;4BACzG,4BAAc,8OAAC;gCAAE,WAAU;0CAA8C;;;;;uCAAmB;;;;;;;oBAE9F,wBAAU,8OAAC;wBAAI,WAAU;kCAAwB;;;;;+BAAiB;;;;;;;0BAGvE,8OAAC;gBAAI,WAAU;0BAAa;;;;;;;;;;;;AAGlC","debugId":null}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file:///home/robin/mca/web/src/components/StatCard.tsx"],"sourcesContent":["\"use client\";\nimport { ReactNode } from \"react\";\nimport { motion } from \"framer-motion\";\n\ntype Props = {\n  label: ReactNode;\n  value: ReactNode;\n  helper?: ReactNode;\n  icon?: ReactNode;\n  onClick?: () => void;\n};\n\nexport default function StatCard({ label, value, helper, icon, onClick }: Props) {\n  const CardElement: typeof motion.div | typeof motion.button = onClick ? motion.button : motion.div;\n  return (\n    <CardElement\n      type={onClick ? \"button\" : undefined}\n      onClick={onClick}\n      className={`rounded-2xl border border-white/60 dark:border-[#2b1f4a] bg-gradient-to-br from-[#FDF5FF] via-[#E9A5F1]/60 to-[#C68EFD]/40 dark:from-[#281745] dark:via-[#1f1136] dark:to-[#120926] p-5 shadow-lg shadow-[#C68EFD]/20 transition ${\n        onClick ? \"text-left focus:outline-none focus:ring-2 focus:ring-blue-400/40 cursor-pointer\" : \"\"\n      }`}\n      initial={{ opacity: 0, y: 10 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.2 }}\n      whileHover={{ y: -4 }}\n      whileTap={onClick ? { scale: 0.98 } : undefined}\n    >\n      <div className=\"flex items-start gap-3\">\n        {icon ? <div className=\"text-blue-600 dark:text-blue-300\">{icon}</div> : null}\n        <div>\n          <p className=\"text-xs uppercase tracking-[0.3em] text-slate-400\">{label}</p>\n          <p className=\"text-2xl font-semibold text-slate-900 dark:text-white mt-2\">{value}</p>\n          {helper ? <p className=\"text-xs text-slate-500 dark:text-slate-400 mt-1\">{helper}</p> : null}\n        </div>\n      </div>\n    </CardElement>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAYe,SAAS,SAAS,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,EAAS;IAC7E,MAAM,cAAwD,UAAU,oMAAM,CAAC,MAAM,GAAG,oMAAM,CAAC,GAAG;IAClG,qBACE,8OAAC;QACC,MAAM,UAAU,WAAW;QAC3B,SAAS;QACT,WAAW,CAAC,iOAAiO,EAC3O,UAAU,oFAAoF,IAC9F;QACF,SAAS;YAAE,SAAS;YAAG,GAAG;QAAG;QAC7B,SAAS;YAAE,SAAS;YAAG,GAAG;QAAE;QAC5B,YAAY;YAAE,UAAU;QAAI;QAC5B,YAAY;YAAE,GAAG,CAAC;QAAE;QACpB,UAAU,UAAU;YAAE,OAAO;QAAK,IAAI;kBAEtC,cAAA,8OAAC;YAAI,WAAU;;gBACZ,qBAAO,8OAAC;oBAAI,WAAU;8BAAoC;;;;;2BAAc;8BACzE,8OAAC;;sCACC,8OAAC;4BAAE,WAAU;sCAAqD;;;;;;sCAClE,8OAAC;4BAAE,WAAU;sCAA8D;;;;;;wBAC1E,uBAAS,8OAAC;4BAAE,WAAU;sCAAmD;;;;;mCAAc;;;;;;;;;;;;;;;;;;AAKlG","debugId":null}},
    {"offset": {"line": 165, "column": 0}, "map": {"version":3,"sources":["file:///home/robin/mca/web/src/lib/format.ts"],"sourcesContent":["export function formatBDT(valueMinor: number) {\n  const taka = (valueMinor || 0) / 100;\n  return new Intl.NumberFormat(\"en-BD\", { style: \"currency\", currency: \"BDT\" }).format(taka);\n}\n"],"names":[],"mappings":";;;;AAAO,SAAS,UAAU,UAAkB;IAC1C,MAAM,OAAO,CAAC,cAAc,CAAC,IAAI;IACjC,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QAAE,OAAO;QAAY,UAAU;IAAM,GAAG,MAAM,CAAC;AACvF","debugId":null}},
    {"offset": {"line": 180, "column": 0}, "map": {"version":3,"sources":["file:///home/robin/mca/web/src/components/MemberCard.tsx"],"sourcesContent":["\"use client\";\nimport { formatBDT } from \"@/lib/format\";\nimport { motion } from \"framer-motion\";\nimport type { MemberSummary } from \"@/types/home\";\n\ntype Props = {\n  member: Pick<MemberSummary, \"userId\" | \"name\" | \"balance\" | \"lastMonth\"> & {\n    totalDeposits?: number;\n    totalWithdraws?: number;\n  };\n  onSelect?: (userId: string) => void;\n};\n\nexport default function MemberCard({ member, onSelect }: Props) {\n  const handleClick = () => {\n    if (onSelect) onSelect(member.userId);\n  };\n  const Card = motion.button;\n  return (\n    <Card\n      type=\"button\"\n      onClick={handleClick}\n      className={`w-full text-left rounded-2xl border border-white/70 dark:border-[#2b1f4a] bg-gradient-to-br from-[#FDF5FF]/90 via-[#E9A5F1]/60 to-[#C68EFD]/50 dark:from-[#271444]/80 dark:via-[#1f0f37]/60 dark:to-[#140a25]/60 p-4 shadow-lg shadow-[#8F87F1]/15 ${\n        onSelect ? \"focus:outline-none focus:ring-2 focus:ring-[#C68EFD]/40\" : \"\"\n      }`}\n      whileHover={{ y: -4, boxShadow: \"0 20px 30px rgba(143,135,241,0.25)\" }}\n      whileTap={{ scale: 0.98 }}\n      transition={{ duration: 0.2, ease: [0.16, 1, 0.3, 1] }}\n    >\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <p className=\"text-base font-semibold text-slate-900 dark:text-white\">{member.name}</p>\n          <p className=\"text-xs text-slate-500 dark:text-slate-400\">Last month {formatBDT(member.lastMonth || 0)}</p>\n        </div>\n        <div className=\"text-right\">\n          <p className=\"text-xs text-slate-500 dark:text-slate-400\">Balance</p>\n          <p className=\"text-sm font-semibold text-emerald-600 dark:text-emerald-300\">{formatBDT(member.balance || 0)}</p>\n        </div>\n      </div>\n    </Card>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAae,SAAS,WAAW,EAAE,MAAM,EAAE,QAAQ,EAAS;IAC5D,MAAM,cAAc;QAClB,IAAI,UAAU,SAAS,OAAO,MAAM;IACtC;IACA,MAAM,OAAO,oMAAM,CAAC,MAAM;IAC1B,qBACE,8OAAC;QACC,MAAK;QACL,SAAS;QACT,WAAW,CAAC,mPAAmP,EAC7P,WAAW,4DAA4D,IACvE;QACF,YAAY;YAAE,GAAG,CAAC;YAAG,WAAW;QAAqC;QACrE,UAAU;YAAE,OAAO;QAAK;QACxB,YAAY;YAAE,UAAU;YAAK,MAAM;gBAAC;gBAAM;gBAAG;gBAAK;aAAE;QAAC;kBAErD,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;;sCACC,8OAAC;4BAAE,WAAU;sCAA0D,OAAO,IAAI;;;;;;sCAClF,8OAAC;4BAAE,WAAU;;gCAA6C;gCAAY,IAAA,iIAAS,EAAC,OAAO,SAAS,IAAI;;;;;;;;;;;;;8BAEtG,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAE,WAAU;sCAA6C;;;;;;sCAC1D,8OAAC;4BAAE,WAAU;sCAAgE,IAAA,iIAAS,EAAC,OAAO,OAAO,IAAI;;;;;;;;;;;;;;;;;;;;;;;AAKnH","debugId":null}},
    {"offset": {"line": 287, "column": 0}, "map": {"version":3,"sources":["file:///home/robin/mca/web/src/components/layout/PageHeader.tsx"],"sourcesContent":["import { ReactNode } from \"react\";\n\ntype Props = {\n  eyebrow?: string;\n  title: string;\n  description?: string;\n  actions?: ReactNode;\n};\n\nexport default function PageHeader({ eyebrow, title, description, actions }: Props) {\n  return (\n    <div className=\"mb-6 space-y-3\">\n      {eyebrow ? <p className=\"text-xs uppercase tracking-[0.3em] text-slate-400\">{eyebrow}</p> : null}\n      <div className=\"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between\">\n        <div className=\"space-y-2\">\n          <h1 className=\"text-2xl sm:text-3xl font-semibold text-slate-900 dark:text-white\">{title}</h1>\n          {description ? <p className=\"text-base text-slate-500 dark:text-slate-400 max-w-3xl\">{description}</p> : null}\n        </div>\n        {actions ? <div className=\"flex flex-wrap gap-2\">{actions}</div> : null}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;;AASe,SAAS,WAAW,EAAE,OAAO,EAAE,KAAK,EAAE,WAAW,EAAE,OAAO,EAAS;IAChF,qBACE,8OAAC;QAAI,WAAU;;YACZ,wBAAU,8OAAC;gBAAE,WAAU;0BAAqD;;;;;uBAAe;0BAC5F,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;0CAAqE;;;;;;4BAClF,4BAAc,8OAAC;gCAAE,WAAU;0CAA0D;;;;;uCAAmB;;;;;;;oBAE1G,wBAAU,8OAAC;wBAAI,WAAU;kCAAwB;;;;;+BAAiB;;;;;;;;;;;;;AAI3E","debugId":null}},
    {"offset": {"line": 442, "column": 0}, "map": {"version":3,"sources":["file:///home/robin/mca/web/src/lib/clientApi.ts"],"sourcesContent":["import axios from \"axios\";\nimport { formatBDT } from \"./format\";\n\nconst baseURL = process.env.NEXT_PUBLIC_API_BASE || \"http://localhost:4000/api\";\n\nexport const api = axios.create({\n  baseURL,\n  withCredentials: true,\n});\n\nexport { formatBDT };\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,UAAU,QAAQ,GAAG,CAAC,oBAAoB,IAAI;AAE7C,MAAM,MAAM,gJAAK,CAAC,MAAM,CAAC;IAC9B;IACA,iBAAiB;AACnB","debugId":null}},
    {"offset": {"line": 460, "column": 0}, "map": {"version":3,"sources":["file:///home/robin/mca/web/src/components/Button.tsx"],"sourcesContent":["\"use client\";\nimport { ButtonHTMLAttributes, DetailedHTMLProps } from \"react\";\n\ntype Props = DetailedHTMLProps<ButtonHTMLAttributes<HTMLButtonElement>, HTMLButtonElement> & {\n  variant?: \"primary\" | \"secondary\" | \"ghost\" | \"danger\";\n};\n\nconst variants: Record<NonNullable<Props[\"variant\"]>, string> = {\n  primary: \"bg-blue-600 text-white hover:bg-blue-500\",\n  secondary: \"bg-white border border-blue-200 text-blue-700 hover:bg-blue-50\",\n  ghost: \"bg-transparent text-slate-600 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800\",\n  danger: \"bg-rose-600 text-white hover:bg-rose-500\",\n};\n\nexport default function Button({ variant = \"primary\", className = \"\", ...props }: Props) {\n  return (\n    <button\n      className={`inline-flex items-center justify-center gap-1.5 rounded-lg px-4 py-2 text-sm font-medium transition disabled:opacity-50 disabled:cursor-not-allowed ${variants[variant]} ${className}`}\n      {...props}\n    />\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;AAOA,MAAM,WAA0D;IAC9D,SAAS;IACT,WAAW;IACX,OAAO;IACP,QAAQ;AACV;AAEe,SAAS,OAAO,EAAE,UAAU,SAAS,EAAE,YAAY,EAAE,EAAE,GAAG,OAAc;IACrF,qBACE,8OAAC;QACC,WAAW,CAAC,oJAAoJ,EAAE,QAAQ,CAAC,QAAQ,CAAC,CAAC,EAAE,WAAW;QACjM,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 487, "column": 0}, "map": {"version":3,"sources":["file:///home/robin/mca/web/src/components/deposit/DepositForm.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport Button from \"@/components/Button\";\nimport { getBrowserApiBase } from \"@/lib/api\";\nimport { formatBDT } from \"@/lib/format\";\n\ntype Props = {\n  userId: string;\n};\n\ntype Due = {\n  _id: string;\n  principal: number;\n  months: number;\n  monthlyRatePct: number;\n  penaltyRule?: { graceDays?: number; monthlyPenaltyPct?: number; enabled?: boolean };\n  schedule: Array<{ dueDate: string; totalDuePoisha: number; paidPoisha?: number; status: string }>;\n};\n\nexport default function DepositForm({ userId }: Props) {\n  const [mode, setMode] = useState<\"simple\" | \"pay_due\" | \"investment_return\">(\"simple\");\n  const [amount, setAmount] = useState(\"\");\n  const [date, setDate] = useState(() => new Date().toISOString().slice(0, 10));\n  const [note, setNote] = useState(\"Deposit\");\n  const [includePenalty, setIncludePenalty] = useState(true);\n  const [dues, setDues] = useState<Due[]>([]);\n  const [dueId, setDueId] = useState<string | null>(null);\n  const [loadingDues, setLoadingDues] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [investments, setInvestments] = useState<Array<{ id: string; name: string; status: string; amountPoisha: number; returnedPoisha?: number }>>([]);\n  const [investmentId, setInvestmentId] = useState<string | null>(null);\n  const [loadingInvestments, setLoadingInvestments] = useState(false);\n  const [investmentError, setInvestmentError] = useState<string | null>(null);\n\n  useEffect(() => {\n    setAmount(\"\");\n    setDueId(null);\n  }, [userId]);\n\n  useEffect(() => {\n    if (mode !== \"pay_due\") return;\n    setLoadingDues(true);\n    setError(null);\n    fetch(`${getBrowserApiBase()}/users/${userId}/dues`, { credentials: \"include\" })\n      .then(async (res) => {\n        if (!res.ok) throw new Error(\"Failed to load dues\");\n        const list = (await res.json()) as Due[];\n        setDues(list);\n        if (list.length && !dueId) setDueId(list[0]._id);\n      })\n      .catch((err: any) => setError(err?.message || \"Failed to load dues\"))\n      .finally(() => setLoadingDues(false));\n  }, [mode, userId, dueId]);\n\n  const hasOpenDues = dues.length > 0;\n  useEffect(() => {\n    if (mode === \"pay_due\" && hasOpenDues && !dueId) setDueId(dues[0]._id);\n  }, [mode, hasOpenDues, dues, dueId]);\n\n  useEffect(() => {\n    if (mode !== \"investment_return\") return;\n    setLoadingInvestments(true);\n    setInvestmentError(null);\n    fetch(`${getBrowserApiBase()}/investments`, { credentials: \"include\" })\n      .then(async (res) => {\n        if (!res.ok) throw new Error((await res.json())?.error || \"Failed to load investments\");\n        const list = await res.json();\n        setInvestments(list);\n        if (list.length) setInvestmentId(list[0].id);\n      })\n      .catch((err: any) => setInvestmentError(err?.message || \"Failed to load investments\"))\n      .finally(() => setLoadingInvestments(false));\n  }, [mode]);\n\n  useEffect(() => {\n    setNote((prev) => {\n      if (mode === \"investment_return\" && prev === \"Deposit\") return \"Investment return\";\n      if (mode !== \"investment_return\" && prev === \"Investment return\") return \"Deposit\";\n      return prev;\n    });\n  }, [mode]);\n\n  const selected = useMemo(() => dues.find((d) => d._id === dueId), [dues, dueId]);\n  const suggested = useMemo(() => {\n    if (!selected) return 0;\n    const today = new Date(date);\n    const grace = selected.penaltyRule?.graceDays ?? 3;\n    const pct = selected.penaltyRule?.monthlyPenaltyPct ?? 1;\n    for (const item of selected.schedule) {\n      if (item.status === \"paid\") continue;\n      const base = (item.totalDuePoisha || 0) - (item.paidPoisha || 0);\n      if (base <= 0) continue;\n      const dueDate = new Date(item.dueDate);\n      dueDate.setDate(dueDate.getDate() + grace);\n      let total = base;\n      if (includePenalty && today > dueDate && selected.penaltyRule?.enabled) {\n        total += Math.floor((item.totalDuePoisha * pct) / 100);\n      }\n      return total;\n    }\n    return 0;\n  }, [selected, includePenalty, date]);\n\n  const onSubmit = async () => {\n    if (!userId) return;\n    setSaving(true);\n    setError(null);\n    try {\n      if (mode === \"investment_return\") {\n        if (!investmentId) throw new Error(\"Pick an investment to credit the return against.\");\n        const amtTaka = Number(amount);\n        if (!amtTaka || !Number.isFinite(amtTaka)) throw new Error(\"Enter the amount that came back.\");\n        const res = await fetch(`${getBrowserApiBase()}/investments/${investmentId}/return`, {\n          method: \"POST\",\n          credentials: \"include\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ amount: amtTaka, date, note }),\n        });\n        if (!res.ok) throw new Error((await res.json())?.error || \"Failed to record investment return\");\n        setAmount(\"\");\n        setMode(\"simple\");\n        setInvestmentId(null);\n        return;\n      }\n\n      const payload: any = { userId, mode, date, note, includePenalty };\n      const amtTaka = Number(amount);\n      if (amount) payload.amount = Number.isFinite(amtTaka) ? amtTaka : 0;\n      else payload.amountPoisha = suggested || 0;\n      if (mode === \"pay_due\") payload.dueId = dueId;\n      const res = await fetch(`${getBrowserApiBase()}/deposit`, {\n        method: \"POST\",\n        credentials: \"include\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(payload),\n      });\n      if (!res.ok) throw new Error((await res.json())?.error || \"Deposit failed\");\n      setAmount(\"\");\n    } catch (err: any) {\n      setError(err?.message || \"Deposit failed\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <section className=\"rounded-2xl border border-slate-200 dark:border-slate-800 p-4 bg-white/70 dark:bg-slate-900/40 space-y-4\">\n        <header className=\"flex flex-col gap-2\">\n          <p className=\"text-xs uppercase tracking-[0.3em] text-slate-400\">Step 1</p>\n          <h3 className=\"text-base font-semibold text-slate-900 dark:text-white\">Choose the intent</h3>\n        </header>\n        <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-3\">\n          <ModeCard title=\"Simple deposit\" body=\"Keeps the balance free for future withdrawals.\" active={mode === \"simple\"} onClick={() => setMode(\"simple\")} />\n          <ModeCard\n            title=\"Pay down a due\"\n            body={hasOpenDues ? \"Apply this to their repayment schedule.\" : \"No open dues right now.\"}\n            active={mode === \"pay_due\"}\n            onClick={() => setMode(\"pay_due\")}\n            disabled={!hasOpenDues}\n          />\n          <ModeCard\n            title=\"Investment return\"\n            body=\"Re-add money that just came back from an investment.\"\n            active={mode === \"investment_return\"}\n            onClick={() => setMode(\"investment_return\")}\n          />\n        </div>\n\n        {mode === \"pay_due\" && (\n          <div className=\"rounded-2xl border border-blue-100 dark:border-blue-500/30 bg-blue-50/60 dark:bg-blue-500/10 p-4 space-y-3\">\n            <div className=\"flex items-center justify-between gap-3\">\n              <h4 className=\"text-sm font-semibold text-slate-900 dark:text-white\">Target a due</h4>\n              <span className=\"text-xs text-blue-600 dark:text-blue-200 font-medium bg-blue-100/70 dark:bg-blue-500/20 px-2 py-0.5 rounded-full\">\n                {loadingDues ? \"Loading…\" : `${dues.length} open`}\n              </span>\n            </div>\n            <select className=\"input-like\" value={dueId || \"\"} onChange={(e) => setDueId(e.target.value)}>\n              <option value=\"\">Select due…</option>\n              {dues.map((d) => (\n                <option key={d._id} value={d._id}>\n                  Principal {formatBDT(d.principal)} — {d.months} mo @ {d.monthlyRatePct}%\n                </option>\n              ))}\n            </select>\n            <label className=\"inline-flex items-center gap-2 text-sm\">\n              <input type=\"checkbox\" checked={includePenalty} onChange={(e) => setIncludePenalty(e.target.checked)} />\n              Add penalty when grace period is over\n            </label>\n            <div className=\"text-xs text-blue-700 dark:text-blue-200 bg-white/60 dark:bg-slate-900/40 rounded-xl px-3 py-2 inline-flex items-center gap-2\">\n              Suggested instalment: <strong>{formatBDT(suggested)}</strong>\n            </div>\n          </div>\n        )}\n\n        {mode === \"investment_return\" && (\n          <div className=\"rounded-2xl border border-emerald-200 dark:border-emerald-500/40 bg-emerald-50/60 dark:bg-emerald-500/10 p-4 space-y-3\">\n            <div className=\"flex items-center justify-between gap-3\">\n              <h4 className=\"text-sm font-semibold text-slate-900 dark:text-white\">Select the investment</h4>\n              <span className=\"text-xs text-emerald-700 dark:text-emerald-200 font-medium bg-white/70 dark:bg-slate-900/40 px-2 py-0.5 rounded-full\">\n                {loadingInvestments ? \"Loading…\" : `${investments.length} recorded`}\n              </span>\n            </div>\n            <select className=\"input-like\" value={investmentId || \"\"} onChange={(e) => setInvestmentId(e.target.value || null)}>\n              <option value=\"\">Pick an investment…</option>\n              {investments.map((inv) => (\n                <option key={inv.id} value={inv.id}>\n                  {inv.name} · {inv.status === \"completed\" ? \"Completed\" : \"Active\"} ({formatBDT(inv.amountPoisha)})\n                </option>\n              ))}\n            </select>\n            {investmentError ? <p className=\"text-sm text-rose-500\">{investmentError}</p> : null}\n            {!investments.length && !loadingInvestments ? <p className=\"text-sm text-slate-500\">No investments recorded yet.</p> : null}\n          </div>\n        )}\n      </section>\n\n      <section className=\"rounded-2xl border border-slate-200 dark:border-slate-800 p-4 bg-white/80 dark:bg-slate-900/50 space-y-4\">\n        <header>\n          <p className=\"text-xs uppercase tracking-[0.3em] text-slate-400\">Step 2</p>\n          <h3 className=\"text-base font-semibold text-slate-900 dark:text-white\">Fill in the details</h3>\n        </header>\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n          <Field label=\"Amount (BDT)\">\n            <input className=\"input-like\" type=\"number\" step=\"0.01\" placeholder=\"0.00\" value={amount} onChange={(e) => setAmount(e.target.value)} />\n          </Field>\n          <Field label=\"Date\">\n            <input className=\"input-like\" type=\"date\" value={date} onChange={(e) => setDate(e.target.value)} />\n          </Field>\n        </div>\n        <Field label=\"Note\">\n          <input className=\"input-like\" value={note} onChange={(e) => setNote(e.target.value)} />\n        </Field>\n        {error ? <p className=\"text-sm text-rose-500\">{error}</p> : null}\n      </section>\n\n      <div className=\"flex justify-end\">\n        <Button onClick={onSubmit} disabled={saving}>\n          {saving ? \"Saving…\" : \"Save deposit\"}\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nfunction Field({ label, children }: { label: string; children: React.ReactNode }) {\n  return (\n    <div className=\"space-y-1\">\n      <label className=\"text-sm font-medium text-slate-600 dark:text-slate-300\">{label}</label>\n      {children}\n    </div>\n  );\n}\n\nfunction ModeCard({ title, body, active, onClick, disabled }: { title: string; body: string; active: boolean; onClick: () => void; disabled?: boolean }) {\n  return (\n    <button\n      type=\"button\"\n      onClick={onClick}\n      disabled={disabled}\n      className={`rounded-2xl border p-4 text-left transition disabled:opacity-60 disabled:cursor-not-allowed ${\n        active\n          ? \"border-blue-400 bg-blue-50 text-blue-700 dark:border-blue-500 dark:bg-blue-500/10 dark:text-blue-200\"\n          : \"border-slate-200 dark:border-slate-700 hover:border-blue-200 hover:bg-blue-50/40 dark:hover:border-blue-500/40 dark:hover:bg-slate-800\"\n      }`}\n    >\n      <p className=\"font-semibold\">{title}</p>\n      <p className=\"text-sm text-slate-500 dark:text-slate-400\">{body}</p>\n    </button>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1099, "column": 0}, "map": {"version":3,"sources":["file:///home/robin/mca/web/src/components/withdraw/WithdrawForm.tsx"],"sourcesContent":["\"use client\";\nimport { memo, ReactNode, useEffect, useMemo, useState } from \"react\";\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { api, formatBDT } from \"@/lib/clientApi\";\nimport Button from \"@/components/Button\";\nimport { useToast } from \"@/components/providers/ToastProvider\";\n\ntype PreviewResponse = { eligibleCount: number; rows: { userId: string; name: string; share: number }[] };\n\nfunction WithdrawForm({ userId }: { userId?: string }) {\n  const qc = useQueryClient();\n  const { notify } = useToast();\n  const allowModeToggle = !userId;\n  const [mode, setMode] = useState<\"member\" | \"investment\">(\"member\");\n  const effectiveMode = userId ? \"member\" : mode;\n  const [takerId, setTakerId] = useState(\"\");\n  const [amount, setAmount] = useState(\"\");\n  const [date, setDate] = useState(() => new Date().toISOString().slice(0, 10));\n  const [months, setMonths] = useState(3);\n  const [rate, setRate] = useState(2);\n  const [penaltyEnabled, setPenaltyEnabled] = useState(true);\n  const [penaltyPct, setPenaltyPct] = useState(1);\n  const [graceDays, setGraceDays] = useState(3);\n  const [investmentName, setInvestmentName] = useState(\"\");\n  const [investmentStart, setInvestmentStart] = useState(() => new Date().toISOString().slice(0, 10));\n  const [investmentMonths, setInvestmentMonths] = useState(6);\n  const [investmentRate, setInvestmentRate] = useState(3);\n  const [investmentOpenEnded, setInvestmentOpenEnded] = useState(false);\n\n  const users = useQuery({ queryKey: [\"users\"], queryFn: async () => (await api.get(`/users`)).data });\n  useEffect(() => {\n    if (userId) {\n      setTakerId(userId);\n      return;\n    }\n    if (!takerId && users.data?.length) setTakerId(users.data[0].id);\n  }, [users.data, takerId, userId]);\n\n  const selectableMembers = useMemo(() => {\n    if (!users.data) return [];\n    if (effectiveMode === \"member\") return users.data.filter((u: any) => u.id !== takerId);\n    return users.data;\n  }, [users.data, takerId, effectiveMode]);\n\n  const [excluded, setExcluded] = useState<string[]>([]);\n  useEffect(() => {\n    if (effectiveMode === \"member\") setExcluded((prev) => prev.filter((id) => id !== takerId));\n  }, [effectiveMode, takerId]);\n  const toggleExcluded = (id: string) => setExcluded((arr) => (arr.includes(id) ? arr.filter((x) => x !== id) : [...arr, id]));\n\n  const [preview, setPreview] = useState<PreviewResponse | null>(null);\n  useEffect(() => {\n    const amtTaka = Number(amount);\n    if (!amtTaka || amtTaka <= 0 || !isFinite(amtTaka)) {\n      setPreview(null);\n      return;\n    }\n    const excludeIds = excluded.join(\",\");\n    api\n      .get(`/preview/withdraw-split`, { params: { amount: amtTaka, excludeIds } })\n      .then((r) => setPreview(r.data))\n      .catch(() => setPreview(null));\n  }, [amount, excluded]);\n\n  const withdrawMutation = useMutation({\n    mutationFn: (body: any) => api.post(\"/withdraw\", body),\n    onSuccess: () => {\n      if (takerId) qc.invalidateQueries({ queryKey: [\"txs\", takerId] });\n      qc.invalidateQueries({ queryKey: [\"home\"] });\n      notify(\"Withdraw recorded\", \"success\");\n      setAmount(\"\");\n    },\n    onError: () => notify(\"Withdraw failed\", \"error\"),\n  });\n\n  const investmentMutation = useMutation({\n    mutationFn: (body: any) => api.post(\"/investments\", body),\n    onSuccess: () => {\n      qc.invalidateQueries({ queryKey: [\"home\"] });\n      notify(\"Investment recorded\", \"success\");\n      setAmount(\"\");\n      setInvestmentName(\"\");\n    },\n    onError: () => notify(\"Investment failed\", \"error\"),\n  });\n\n  const onSubmit = () => {\n    const amtTaka = Number(amount);\n    if (!amtTaka || !isFinite(amtTaka)) return;\n    if (effectiveMode === \"member\") {\n      withdrawMutation.mutate({\n        takerId,\n        amount: amtTaka,\n        date,\n        reason: \"Withdraw\",\n        excludeMemberIds: excluded,\n        due: { useDefaultDate: true, defaultDate: date, startDate: null, endDate: null, months, monthlyRatePct: rate },\n        penalty: { enabled: penaltyEnabled, monthlyPenaltyPct: penaltyPct, graceDays },\n      });\n    } else {\n      investmentMutation.mutate({\n        name: investmentName || `Investment ${new Date(investmentStart).toLocaleDateString()}`,\n        amount: amtTaka,\n        startDate: investmentStart,\n        months: investmentOpenEnded ? undefined : investmentMonths,\n        monthlyRatePct: investmentOpenEnded ? undefined : investmentRate,\n        openEnded: investmentOpenEnded,\n        excludeMemberIds: excluded,\n      });\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {allowModeToggle && (\n        <section className=\"rounded-2xl border border-slate-100 dark:border-slate-800 p-4 bg-white/70 dark:bg-slate-900/40 space-y-4\">\n          <header className=\"flex items-center justify-between flex-wrap gap-2\">\n            <div>\n              <p className=\"text-xs uppercase tracking-[0.3em] text-slate-400\">Step 1</p>\n              <h3 className=\"text-base font-semibold text-slate-900 dark:text-white\">Pick the type of outflow</h3>\n            </div>\n          </header>\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\n            <ModeCard title=\"Cash-out to a member\" body=\"Record a loan or withdrawal and create a repayment plan.\" active={mode === \"member\"} onClick={() => setMode(\"member\")} />\n            <ModeCard title=\"Invest the funds\" body=\"Split contributions and track expected interest from elsewhere.\" active={mode === \"investment\"} onClick={() => setMode(\"investment\")} />\n          </div>\n        </section>\n      )}\n\n      <section className=\"rounded-2xl border border-slate-100 dark:border-slate-800 p-4 bg-white/80 dark:bg-slate-900/50 space-y-4\">\n        <header>\n          <p className=\"text-xs uppercase tracking-[0.3em] text-slate-400\">Who & why</p>\n          <h3 className=\"text-base font-semibold text-slate-900 dark:text-white\">\n            {effectiveMode === \"member\" ? \"Member details\" : \"Investment details\"}\n          </h3>\n        </header>\n        {effectiveMode === \"member\" ? (\n          <Field label=\"Member\">\n            {userId ? (\n              <div className=\"text-base font-semibold text-slate-900 dark:text-white\">\n                {users.data?.find((u: any) => u.id === userId)?.name || userId}\n              </div>\n            ) : (\n              <select className=\"input-like\" value={takerId} onChange={(e) => setTakerId(e.target.value)}>\n                {users.data?.map((u: any) => (\n                  <option key={u.id} value={u.id}>\n                    {u.name}\n                  </option>\n                ))}\n              </select>\n            )}\n          </Field>\n        ) : (\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n            <Field label=\"Investment name\">\n              <input className=\"input-like\" placeholder=\"e.g. Community fridge fund\" value={investmentName} onChange={(e) => setInvestmentName(e.target.value)} />\n            </Field>\n            <Field label=\"Start date\">\n              <input className=\"input-like\" type=\"date\" value={investmentStart} onChange={(e) => setInvestmentStart(e.target.value)} />\n            </Field>\n            <Field label=\"Months invested\">\n              <div className=\"space-y-2\">\n                <input className=\"input-like\" type=\"number\" min={1} value={investmentMonths} onChange={(e) => setInvestmentMonths(Number(e.target.value))} disabled={investmentOpenEnded} />\n                <label className=\"inline-flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400\">\n                  <input type=\"checkbox\" checked={investmentOpenEnded} onChange={(e) => setInvestmentOpenEnded(e.target.checked)} />\n                  No end date yet\n                </label>\n              </div>\n            </Field>\n            <Field label=\"Monthly interest %\">\n              <input className=\"input-like\" type=\"number\" step=\"0.1\" value={investmentRate} onChange={(e) => setInvestmentRate(Number(e.target.value))} disabled={investmentOpenEnded} />\n            </Field>\n          </div>\n        )}\n      </section>\n\n      {effectiveMode === \"member\" && (\n        <section className=\"rounded-2xl border border-slate-100 dark:border-slate-800 p-4 bg-white/70 dark:bg-slate-900/40 space-y-3\">\n          <header>\n            <p className=\"text-xs uppercase tracking-[0.3em] text-slate-400\">Repayment plan</p>\n            <h3 className=\"text-base font-semibold text-slate-900 dark:text-white\">How will this be paid back?</h3>\n          </header>\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\n            <Field label=\"Months\">\n              <input className=\"input-like\" type=\"number\" min={1} value={months} onChange={(e) => setMonths(Number(e.target.value))} />\n            </Field>\n            <Field label=\"Monthly rate %\">\n              <input className=\"input-like\" type=\"number\" step=\"0.1\" value={rate} onChange={(e) => setRate(Number(e.target.value))} />\n            </Field>\n          </div>\n          <label className=\"inline-flex items-center gap-2 text-sm\">\n            <input type=\"checkbox\" checked={penaltyEnabled} onChange={(e) => setPenaltyEnabled(e.target.checked)} />\n            Apply penalty when overdue\n          </label>\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\n            <Field label=\"Penalty % per month\">\n              <input className=\"input-like\" type=\"number\" step=\"0.1\" value={penaltyPct} onChange={(e) => setPenaltyPct(Number(e.target.value))} disabled={!penaltyEnabled} />\n            </Field>\n            <Field label=\"Grace days\">\n              <input className=\"input-like\" type=\"number\" min={0} value={graceDays} onChange={(e) => setGraceDays(Number(e.target.value))} disabled={!penaltyEnabled} />\n            </Field>\n          </div>\n        </section>\n      )}\n\n      <section className=\"rounded-2xl border border-slate-100 dark:border-slate-800 p-4 bg-white/80 dark:bg-slate-900/50 space-y-4\">\n        <header>\n          <p className=\"text-xs uppercase tracking-[0.3em] text-slate-400\">Fill in the details</p>\n          <h3 className=\"text-base font-semibold text-slate-900 dark:text-white\">Amount & date</h3>\n        </header>\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n          <Field label=\"Amount (BDT)\">\n            <input className=\"input-like\" type=\"number\" step=\"0.01\" placeholder=\"0.00\" value={amount} onChange={(e) => setAmount(e.target.value)} />\n          </Field>\n          <Field label=\"Date\">\n            <input className=\"input-like\" type=\"date\" value={date} onChange={(e) => setDate(e.target.value)} />\n          </Field>\n        </div>\n      </section>\n\n      <section className=\"rounded-2xl border border-slate-100 dark:border-slate-800 p-4 bg-white/70 dark:bg-slate-900/40 space-y-3\">\n        <header>\n          <p className=\"text-xs uppercase tracking-[0.3em] text-slate-400\">Exclusions</p>\n          <h3 className=\"text-base font-semibold text-slate-900 dark:text-white\">Who should skip this split?</h3>\n        </header>\n        <div className=\"flex flex-wrap gap-2\">\n          {selectableMembers.map((member: any) => (\n            <button\n              key={member.id}\n              type=\"button\"\n              onClick={() => toggleExcluded(member.id)}\n              className={`rounded-full border px-3 py-1 text-sm ${\n                excluded.includes(member.id)\n                  ? \"border-rose-200 bg-rose-50 text-rose-600 dark:border-rose-500/40 dark:bg-rose-500/10 dark:text-rose-200\"\n                  : \"border-slate-200 text-slate-600 dark:border-slate-700 dark:text-slate-300\"\n              }`}\n            >\n              {excluded.includes(member.id) ? \"Excluded · \" : \"\"}\n              {member.name}\n            </button>\n          ))}\n        </div>\n      </section>\n\n      <div className=\"flex justify-end\">\n        <Button onClick={onSubmit} disabled={withdrawMutation.isPending || investmentMutation.isPending}>\n          {(withdrawMutation.isPending || investmentMutation.isPending) ? \"Saving…\" : effectiveMode === \"member\" ? \"Record withdrawal\" : \"Record investment\"}\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nfunction Field({ label, children }: { label: string; children: ReactNode }) {\n  return (\n    <div className=\"space-y-1\">\n      <label className=\"text-sm font-medium text-slate-600 dark:text-slate-300\">{label}</label>\n      {children}\n    </div>\n  );\n}\n\nfunction ModeCard({ title, body, active, onClick }: { title: string; body: string; active: boolean; onClick: () => void }) {\n  return (\n    <button\n      type=\"button\"\n      onClick={onClick}\n      className={`rounded-2xl\tborder p-4 text-left transition ${\n        active\n          ? \"border-blue-400 bg-blue-50 text-blue-700 dark:border-blue-500 dark:bg-blue-500/10 dark:text-blue-200\"\n          : \"border-slate-200 text-slate-600 dark:border-slate-700 dark:text-slate-300 hover:border-blue-200 hover:bg-blue-50/40 dark:hover:border-blue-500/40 dark:hover:bg-slate-800\"\n      }`}\n    >\n      <p className=\"font-semibold\">{title}</p>\n      <p className=\"text-sm text-slate-500 dark:text-slate-400\">{body}</p>\n    </button>\n  );\n}\n\nexport default memo(WithdrawForm);\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1857, "column": 0}, "map": {"version":3,"sources":["file:///home/robin/mca/web/src/components/Skeleton.tsx"],"sourcesContent":["export function SkeletonLine({ className = \"\" }: { className?: string }) {\n  return <div className={`h-3 bg-gray-200/80 rounded animate-pulse ${className}`} />;\n}\n\nexport function SkeletonCard() {\n  return (\n    <div className=\"bg-white/80 dark:bg-slate-900/50 p-4 shadow rounded-2xl space-y-2 animate-pulse\">\n      <SkeletonLine className=\"h-4 w-2/3\" />\n      <SkeletonLine className=\"w-1/2\" />\n      <SkeletonLine className=\"w-1/3\" />\n    </div>\n  );\n}\n\nexport function SkeletonList({ rows = 4, className = \"\" }: { rows?: number; className?: string }) {\n  return (\n    <div className={`space-y-2 ${className}`}>\n      {Array.from({ length: rows }).map((_, idx) => (\n        <div key={`skeleton-row-${idx}`} className=\"bg-white/70 dark:bg-slate-900/40 border border-slate-100 dark:border-slate-800 rounded-xl p-3 space-y-2 animate-pulse\">\n          <SkeletonLine className=\"w-2/3\" />\n          <SkeletonLine className=\"w-1/3\" />\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport function SkeletonTableRows({ rows = 4 }: { rows?: number }) {\n  return (\n    <div className=\"space-y-2\">\n      {Array.from({ length: rows }).map((_, idx) => (\n        <div key={`skeleton-table-${idx}`} className=\"grid grid-cols-12 gap-2 items-center\">\n          <SkeletonLine className=\"col-span-3 h-3\" />\n          <SkeletonLine className=\"col-span-4 h-3\" />\n          <SkeletonLine className=\"col-span-3 h-3\" />\n          <SkeletonLine className=\"col-span-2 h-3\" />\n        </div>\n      ))}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAAO,SAAS,aAAa,EAAE,YAAY,EAAE,EAA0B;IACrE,qBAAO,8OAAC;QAAI,WAAW,CAAC,yCAAyC,EAAE,WAAW;;;;;;AAChF;AAEO,SAAS;IACd,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAa,WAAU;;;;;;0BACxB,8OAAC;gBAAa,WAAU;;;;;;0BACxB,8OAAC;gBAAa,WAAU;;;;;;;;;;;;AAG9B;AAEO,SAAS,aAAa,EAAE,OAAO,CAAC,EAAE,YAAY,EAAE,EAAyC;IAC9F,qBACE,8OAAC;QAAI,WAAW,CAAC,UAAU,EAAE,WAAW;kBACrC,MAAM,IAAI,CAAC;YAAE,QAAQ;QAAK,GAAG,GAAG,CAAC,CAAC,GAAG,oBACpC,8OAAC;gBAAgC,WAAU;;kCACzC,8OAAC;wBAAa,WAAU;;;;;;kCACxB,8OAAC;wBAAa,WAAU;;;;;;;eAFhB,CAAC,aAAa,EAAE,KAAK;;;;;;;;;;AAOvC;AAEO,SAAS,kBAAkB,EAAE,OAAO,CAAC,EAAqB;IAC/D,qBACE,8OAAC;QAAI,WAAU;kBACZ,MAAM,IAAI,CAAC;YAAE,QAAQ;QAAK,GAAG,GAAG,CAAC,CAAC,GAAG,oBACpC,8OAAC;gBAAkC,WAAU;;kCAC3C,8OAAC;wBAAa,WAAU;;;;;;kCACxB,8OAAC;wBAAa,WAAU;;;;;;kCACxB,8OAAC;wBAAa,WAAU;;;;;;kCACxB,8OAAC;wBAAa,WAAU;;;;;;;eAJhB,CAAC,eAAe,EAAE,KAAK;;;;;;;;;;AASzC","debugId":null}},
    {"offset": {"line": 1996, "column": 0}, "map": {"version":3,"sources":["file:///home/robin/mca/web/src/hooks/useLockBodyScroll.ts"],"sourcesContent":["import { useEffect } from \"react\";\n\nexport function useLockBodyScroll(active: boolean) {\n  useEffect(() => {\n    if (!active) return;\n    const prevOverflow = document.body.style.overflow;\n    const prevPadding = document.body.style.paddingRight;\n    const scrollbarWidth = window.innerWidth - document.documentElement.clientWidth;\n    document.body.style.overflow = \"hidden\";\n    if (scrollbarWidth > 0) {\n      document.body.style.paddingRight = `${scrollbarWidth}px`;\n    }\n    return () => {\n      document.body.style.overflow = prevOverflow;\n      document.body.style.paddingRight = prevPadding;\n    };\n  }, [active]);\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEO,SAAS,kBAAkB,MAAe;IAC/C,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,QAAQ;QACb,MAAM,eAAe,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ;QACjD,MAAM,cAAc,SAAS,IAAI,CAAC,KAAK,CAAC,YAAY;QACpD,MAAM,iBAAiB,OAAO,UAAU,GAAG,SAAS,eAAe,CAAC,WAAW;QAC/E,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;QAC/B,IAAI,iBAAiB,GAAG;YACtB,SAAS,IAAI,CAAC,KAAK,CAAC,YAAY,GAAG,GAAG,eAAe,EAAE,CAAC;QAC1D;QACA,OAAO;YACL,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;YAC/B,SAAS,IAAI,CAAC,KAAK,CAAC,YAAY,GAAG;QACrC;IACF,GAAG;QAAC;KAAO;AACb","debugId":null}},
    {"offset": {"line": 2024, "column": 0}, "map": {"version":3,"sources":["file:///home/robin/mca/web/src/components/MemberDrawer.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { AnimatePresence, motion, useReducedMotion } from \"framer-motion\";\nimport { api, formatBDT } from \"@/lib/clientApi\";\nimport DepositForm from \"@/components/deposit/DepositForm\";\nimport WithdrawForm from \"@/components/withdraw/WithdrawForm\";\nimport { SkeletonLine, SkeletonTableRows, SkeletonList } from \"@/components/Skeleton\";\nimport Button from \"@/components/Button\";\nimport { CloseIcon, PencilIcon, TrashIcon } from \"@/components/Icon\";\nimport { useToast } from \"@/components/providers/ToastProvider\";\nimport type { ServerMe } from \"@/lib/server/me\";\nimport { useLockBodyScroll } from \"@/hooks/useLockBodyScroll\";\n\ntype Props = {\n  userId: string;\n  role: ServerMe[\"role\"];\n  onClose: () => void;\n};\n\ntype LedgerTx = {\n  _id: string;\n  type: \"deposit\" | \"withdraw\";\n  amount: number;\n  occurredAt: string;\n  note?: string;\n};\n\nexport default function MemberDrawer({ userId, role, onClose }: Props) {\n  const qc = useQueryClient();\n  const { notify } = useToast();\n  const [tab, setTab] = useState<\"ledger\" | \"deposit\" | \"withdraw\" | \"dues\">(\"ledger\");\n  const [editing, setEditing] = useState<LedgerTx | null>(null);\n  const [amountInput, setAmountInput] = useState(\"\");\n\n  useEffect(() => {\n    if (!editing || editing.type !== \"deposit\") {\n      setAmountInput(\"\");\n      return;\n    }\n    setAmountInput((editing.amount / 100).toFixed(2));\n  }, [editing]);\n\n  useLockBodyScroll(true);\n\n  const txs = useQuery<LedgerTx[]>({\n    queryKey: [\"txs\", userId],\n    queryFn: async () => (await api.get(\"/transactions\", { params: { userId } })).data,\n    enabled: !!userId,\n  });\n\n  const dues = useQuery<any[]>({\n    queryKey: [\"dues\", userId],\n    queryFn: async () => (await api.get(`/users/${userId}/dues`)).data,\n    enabled: !!userId,\n  });\n\n  const patchTx = useMutation({\n    mutationFn: ({ id, body }: { id: string; body: any }) => api.patch(`/transactions/${id}`, body),\n    onMutate: async ({ id, body }) => {\n      await qc.cancelQueries({ queryKey: [\"txs\", userId] });\n      const previous = qc.getQueryData<LedgerTx[]>([\"txs\", userId]);\n      if (previous) {\n        qc.setQueryData<LedgerTx[]>(\n          [\"txs\", userId],\n          previous.map((tx) => (tx._id === id ? { ...tx, note: body.note ?? tx.note, occurredAt: body.date ?? tx.occurredAt, amount: body.amount ? Math.round(body.amount * 100) : tx.amount } : tx))\n        );\n      }\n      return { previous };\n    },\n    onError: (_err, _vars, context) => {\n      if (context?.previous) qc.setQueryData([\"txs\", userId], context.previous);\n      notify(\"Update failed\", \"error\");\n    },\n    onSuccess: () => notify(\"Transaction updated\", \"success\"),\n    onSettled: () => {\n      qc.invalidateQueries({ queryKey: [\"txs\", userId] });\n      setEditing(null);\n    },\n  });\n\n  const deleteTx = useMutation({\n    mutationFn: (id: string) => api.delete(`/transactions/${id}`),\n    onMutate: async (id: string) => {\n      await qc.cancelQueries({ queryKey: [\"txs\", userId] });\n      const previous = qc.getQueryData<LedgerTx[]>([\"txs\", userId]);\n      if (previous) qc.setQueryData([\"txs\", userId], previous.filter((tx) => tx._id !== id));\n      return { previous };\n    },\n    onError: (err: any, _vars, context) => {\n      if (context?.previous) qc.setQueryData([\"txs\", userId], context.previous);\n      notify(err?.response?.data?.error || \"Delete failed\", \"error\");\n    },\n    onSuccess: () => notify(\"Transaction deleted\", \"success\"),\n    onSettled: () => qc.invalidateQueries({ queryKey: [\"txs\", userId] }),\n  });\n\n  const canManage = role !== \"user\";\n\n  const handleSaveEdit = () => {\n    if (!editing) return;\n    const body: Record<string, any> = { note: editing.note, date: editing.occurredAt };\n    if (editing.type === \"deposit\" && amountInput) {\n      const parsed = Number(amountInput);\n      if (Number.isFinite(parsed)) body.amount = parsed;\n    }\n    patchTx.mutate({ id: editing._id, body });\n  };\n\n  const reduceMotion = useReducedMotion();\n  const sheetVariants = reduceMotion\n    ? { initial: { opacity: 0 }, animate: { opacity: 1 }, exit: { opacity: 0 } }\n    : {\n        initial: { y: \"100%\" },\n        animate: { y: 0, transition: { duration: 0.3, ease: [0.16, 1, 0.3, 1] as const } },\n        exit: { y: \"100%\", transition: { duration: 0.22, ease: [0.4, 0, 1, 1] as const } },\n      };\n  const modalVariants = reduceMotion\n    ? { initial: { opacity: 0 }, animate: { opacity: 1 }, exit: { opacity: 0 } }\n    : {\n        initial: { scale: 0.96, opacity: 0 },\n        animate: { scale: 1, opacity: 1, transition: { duration: 0.2, ease: [0.16, 1, 0.3, 1] as const } },\n        exit: { scale: 0.96, opacity: 0, transition: { duration: 0.15, ease: [0.4, 0, 1, 1] as const } },\n      };\n\n  return (\n    <motion.div className=\"fixed inset-0 z-40 bg-gradient-to-b from-white via-slate-50 to-blue-50 dark:from-slate-950 dark:via-slate-900 dark:to-slate-950 overflow-hidden\" variants={sheetVariants} initial=\"initial\" animate=\"animate\" exit=\"exit\">\n      <div className=\"w-full min-h-screen px-4 py-6 sm:px-6 lg:px-10\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div>\n            <p className=\"text-xs uppercase tracking-[0.3em] text-slate-400\">Member</p>\n            <h3 className=\"text-2xl font-semibold text-slate-900 dark:text-white\">Account overview</h3>\n          </div>\n          <button type=\"button\" className=\"p-2 rounded-full border border-slate-200 dark:border-slate-700 hover:bg-white/70 dark:hover:bg-slate-900/60\" onClick={onClose} aria-label=\"Close member drawer\">\n            <CloseIcon />\n          </button>\n        </div>\n\n        <div className=\"flex flex-wrap items-center gap-2 border-b border-slate-100 dark:border-slate-800 mb-4 text-sm\">\n          {([\"ledger\", \"deposit\", \"withdraw\", \"dues\"] as const).map((item) => (\n            <button\n              key={item}\n              type=\"button\"\n              className={`px-3 py-2 rounded-full transition ${tab === item ? \"bg-blue-600 text-white\" : \"bg-white/70 text-slate-600 dark:bg-slate-900/40 dark:text-slate-300\"}`}\n              onClick={() => setTab(item)}\n            >\n              {item.charAt(0).toUpperCase() + item.slice(1)}\n            </button>\n          ))}\n        </div>\n\n        {tab === \"deposit\" ? <DepositForm userId={userId} /> : null}\n        {tab === \"withdraw\" ? <WithdrawForm userId={userId} /> : null}\n\n        {tab === \"ledger\" ? (\n          <div className=\"flex flex-col h-[calc(100vh-200px)] pb-6\">\n            <div className=\"grid grid-cols-12 text-xs text-slate-500 px-2\">\n              <div className=\"col-span-3\">Date</div>\n              <div className=\"col-span-4\">Details</div>\n              <div className=\"col-span-3 text-right\">Amount</div>\n              <div className=\"col-span-2 text-right\">Actions</div>\n            </div>\n            {txs.isLoading ? (\n              <div className=\"p-4\">\n                <SkeletonTableRows rows={4} />\n              </div>\n            ) : txs.data?.length ? (\n              <div className=\"space-y-1 flex-1 overflow-auto pr-1 mt-2\">\n                {txs.data.map((tx) => {\n                  const isDeposit = tx.type === \"deposit\";\n                  const canDelete = canManage && isDeposit;\n                  return (\n                    <div key={tx._id} className=\"grid grid-cols-12 items-center px-2 py-2 text-sm border-b border-slate-100 dark:border-slate-900/40\">\n                      <span className=\"col-span-3\">{new Date(tx.occurredAt).toLocaleDateString(\"en-BD\")}</span>\n                      <span className={`col-span-4 ${isDeposit ? \"text-emerald-600\" : \"text-rose-500\"}`}>{tx.note || (isDeposit ? \"Deposit\" : \"Withdrawal\")}</span>\n                      <span className=\"col-span-3 text-right font-medium\">{formatBDT(tx.amount)}</span>\n                      <span className=\"col-span-2 flex justify-end gap-2 flex-wrap\">\n                        <Button\n                          type=\"button\"\n                          variant=\"ghost\"\n                          className=\"w-20 justify-center px-3 py-1 text-xs flex items-center gap-1 rounded-full bg-[#8F87F1]/20 text-[#5b3cc4] hover:bg-[#8F87F1]/30 dark:bg-[#4c3c8c]/40 dark:text-white\"\n                          onClick={() =>\n                            setEditing({\n                              ...tx,\n                              occurredAt: new Date(tx.occurredAt).toISOString().slice(0, 10),\n                            })\n                          }\n                          disabled={!canManage}\n                          title={canManage ? \"Edit transaction\" : \"View only\"}\n                        >\n                          <PencilIcon className=\"w-3.5 h-3.5\" />\n                          <span className=\"hidden sm:inline\">Edit</span>\n                        </Button>\n                        <Button\n                          type=\"button\"\n                          variant=\"danger\"\n                          className=\"w-20 justify-center px-3 py-1 text-xs flex items-center gap-1 rounded-full\"\n                          onClick={() => {\n                            if (!canDelete) return;\n                            if (confirm(\"Delete this transaction?\")) deleteTx.mutate(tx._id);\n                          }}\n                          disabled={!canDelete}\n                          title={canDelete ? \"Delete deposit\" : \"Only deposits can be deleted\"}\n                        >\n                          <TrashIcon className=\"w-3.5 h-3.5\" />\n                          <span className=\"hidden sm:inline\">Delete</span>\n                        </Button>\n                      </span>\n                    </div>\n                  );\n                })}\n              </div>\n            ) : (\n              <div className=\"text-sm text-slate-500 px-2 py-3\">No transactions yet.</div>\n            )}\n          </div>\n        ) : null}\n\n        {tab === \"dues\" ? (\n          <div>\n            <div className=\"grid grid-cols-3 text-xs text-slate-500 px-2 mb-2\">\n              <span>Due date</span>\n              <span>Amount</span>\n              <span className=\"text-right\">Status</span>\n            </div>\n            {dues.isLoading ? (\n              <div className=\"p-4\">\n                <SkeletonList rows={3} />\n              </div>\n            ) : dues.data?.length ? (\n              <div className=\"space-y-2 max-h-72 overflow-auto\">\n                {dues.data.map((due) => (\n                  <div key={due._id} className=\"rounded-xl border border-slate-200 dark:border-slate-800\">\n                    <div className=\"px-3 py-2 text-xs text-slate-500 dark:text-slate-400\">Principal: {formatBDT(due.principal)}</div>\n                    {due.schedule.slice(0, 4).map((item: any, idx: number) => (\n                      <div key={`${due._id}-${idx}`} className=\"grid grid-cols-3 items-center px-3 py-1 border-t border-slate-100 dark:border-slate-900/40 text-sm\">\n                        <span>{new Date(item.dueDate).toLocaleDateString(\"en-BD\")}</span>\n                        <span>{formatBDT(item.totalDuePoisha)}</span>\n                        <span className=\"text-right capitalize text-xs\">{item.status}</span>\n                      </div>\n                    ))}\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"text-sm text-slate-500 px-2 py-3\">No dues scheduled.</div>\n            )}\n          </div>\n        ) : null}\n      </div>\n      <AnimatePresence>\n        {editing ? (\n          <motion.div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/30\" initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} onClick={() => setEditing(null)}>\n            <motion.div className=\"w-[calc(100%-2rem)] max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white/90 dark:bg-slate-950/85 p-5 shadow-xl\" variants={modalVariants} initial=\"initial\" animate=\"animate\" exit=\"exit\" onClick={(e) => e.stopPropagation()}>\n              <div className=\"flex items-center justify-between mb-4\">\n                <h4 className=\"text-base font-semibold text-slate-900 dark:text-white\">Edit transaction</h4>\n                <button type=\"button\" className=\"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800\" onClick={() => setEditing(null)}>\n                  <CloseIcon />\n                </button>\n              </div>\n              <div className=\"space-y-3 text-sm\">\n                <label className=\"space-y-1 block\">\n                  <span className=\"text-slate-600 dark:text-slate-300\">Date</span>\n                  <input type=\"date\" className=\"input-like\" value={editing.occurredAt} onChange={(e) => setEditing((prev) => (prev ? { ...prev, occurredAt: e.target.value } : prev))} />\n                </label>\n                <label className=\"space-y-1 block\">\n                  <span className=\"text-slate-600 dark:text-slate-300\">Note</span>\n                  <input className=\"input-like\" value={editing.note || \"\"} onChange={(e) => setEditing((prev) => (prev ? { ...prev, note: e.target.value } : prev))} />\n                </label>\n                <label className=\"space-y-1 block\">\n                  <span className=\"text-slate-600 dark:text-slate-300\">Amount (BDT)</span>\n                  <input\n                    className=\"input-like\"\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={amountInput}\n                    onChange={(e) => {\n                      setAmountInput(e.target.value);\n                      const parsed = Number(e.target.value);\n                      if (Number.isFinite(parsed)) {\n                        setEditing((prev) => (prev ? { ...prev, amount: Math.round(parsed * 100) } : prev));\n                      }\n                    }}\n                    disabled={editing.type !== \"deposit\"}\n                  />\n                  {editing.type !== \"deposit\" ? <p className=\"text-xs text-slate-500\">Withdrawals & investments lock the amount to keep group splits accurate.</p> : null}\n                </label>\n              </div>\n              <div className=\"mt-4 flex justify-end gap-2\">\n                <Button type=\"button\" variant=\"ghost\" onClick={() => setEditing(null)}>\n                  Cancel\n                </Button>\n                <Button type=\"button\" disabled={patchTx.isPending} onClick={handleSaveEdit}>\n                  {patchTx.isPending ? \"Saving…\" : \"Save changes\"}\n                </Button>\n              </div>\n            </motion.div>\n          </motion.div>\n        ) : null}\n      </AnimatePresence>\n    </motion.div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2900, "column": 0}, "map": {"version":3,"sources":["file:///home/robin/mca/web/src/components/home/TotalBalanceDrawer.tsx"],"sourcesContent":["\"use client\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { motion, useReducedMotion } from \"framer-motion\";\nimport Panel from \"@/components/Panel\";\nimport StatCard from \"@/components/StatCard\";\nimport { SkeletonList } from \"@/components/Skeleton\";\nimport { api, formatBDT } from \"@/lib/clientApi\";\nimport type { MemberSummary } from \"@/types/home\";\nimport { useLockBodyScroll } from \"@/hooks/useLockBodyScroll\";\n\ntype Props = {\n  open: boolean;\n  totalDeposits: number;\n  totalWithdraws: number;\n  available: number;\n  rows: MemberSummary[];\n  onClose: () => void;\n};\n\ntype TransactionSnapshot = { _id: string; note?: string; occurredAt: string; amount: number };\ntype InvestmentSummary = {\n  id: string;\n  name: string;\n  amountPoisha: number;\n  expectedInterestPoisha?: number;\n  returnedPoisha?: number;\n  status: \"active\" | \"completed\";\n};\n\nexport default function TotalBalanceDrawer({ open, totalDeposits, totalWithdraws, available, rows, onClose }: Props) {\n  useLockBodyScroll(open);\n\n  const withdraws = useQuery<TransactionSnapshot[]>({\n    queryKey: [\"withdrawals\", \"totals\"],\n    queryFn: async () => (await api.get(\"/transactions\", { params: { type: \"withdraw\", limit: 20 } })).data,\n    enabled: open,\n  });\n\n  const investments = useQuery<InvestmentSummary[]>({\n    queryKey: [\"investments\", \"totals\"],\n    queryFn: async () => (await api.get(\"/investments\")).data,\n    enabled: open,\n  });\n\n  if (!open) return null;\n  const net = totalDeposits - totalWithdraws;\n\n  const reduceMotion = useReducedMotion();\n  const sheetVariants = reduceMotion\n    ? { initial: { opacity: 0 }, animate: { opacity: 1 }, exit: { opacity: 0 } }\n    : {\n        initial: { y: \"100%\" },\n        animate: { y: 0, transition: { duration: 0.32, ease: [0.16, 1, 0.3, 1] as const } },\n        exit: { y: \"100%\", transition: { duration: 0.22, ease: [0.4, 0, 1, 1] as const } },\n      };\n\n  return (\n    <motion.div className=\"fixed inset-0 z-40 bg-gradient-to-b from-white via-emerald-50 to-slate-50 dark:from-slate-950 dark:via-slate-900 dark:to-slate-950 overflow-y-auto\" variants={sheetVariants} initial=\"initial\" animate=\"animate\" exit=\"exit\">\n      <div className=\"w-full min-h-screen px-4 py-6 sm:px-6\">\n        <div className=\"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between mb-4\">\n          <div>\n            <p className=\"text-xs uppercase tracking-[0.3em] text-slate-400\">Total balance</p>\n            <h2 className=\"text-2xl font-semibold text-slate-900 dark:text-white\">Collections vs. deductions</h2>\n          </div>\n          <button type=\"button\" className=\"text-sm text-slate-500 hover:text-rose-500\" onClick={onClose}>\n            Close\n          </button>\n        </div>\n\n        <div className=\"grid grid-cols-1 gap-3 sm:grid-cols-2 xl:grid-cols-4 mb-4\">\n          <StatCard label=\"Collected overall\" value={formatBDT(totalDeposits)} />\n          <StatCard label=\"Deducted / invested\" value={formatBDT(totalWithdraws)} />\n          <StatCard label=\"Net balance\" value={formatBDT(net)} />\n          <StatCard label=\"Available cash\" value={formatBDT(available)} />\n        </div>\n\n        <div className=\"grid grid-cols-1 gap-6 lg:grid-cols-2\">\n          <Panel title=\"Per-member totals\" description=\"Lifetime deposits vs. deductions.\">\n            <div className=\"overflow-auto max-h-72 pr-1\">\n              <table className=\"min-w-[520px] text-sm\">\n                <thead>\n                  <tr className=\"text-left text-slate-500 dark:text-slate-400\">\n                    <th className=\"py-2 pr-3 font-medium\">Member</th>\n                    <th className=\"py-2 px-3 font-medium text-right\">Deposited</th>\n                    <th className=\"py-2 px-3 font-medium text-right\">Deducted</th>\n                    <th className=\"py-2 pl-3 font-medium text-right\">Balance</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {rows.map((row) => (\n                    <tr key={row.userId} className=\"border-t border-slate-100 dark:border-slate-800\">\n                      <td className=\"py-2 pr-3 font-medium text-slate-900 dark:text-white\">{row.name}</td>\n                      <td className=\"py-2 px-3 text-right\">{formatBDT(row.totalDeposits || 0)}</td>\n                      <td className=\"py-2 px-3 text-right\">{formatBDT(row.totalWithdraws || 0)}</td>\n                      <td className=\"py-2 pl-3 text-right font-semibold text-emerald-600 dark:text-emerald-300\">{formatBDT(row.balance || 0)}</td>\n                    </tr>\n                  ))}\n                  {!rows.length && (\n                    <tr>\n                      <td colSpan={4} className=\"py-3 text-center text-slate-500\">\n                        No members yet.\n                      </td>\n                    </tr>\n                  )}\n                </tbody>\n              </table>\n            </div>\n          </Panel>\n\n          <Panel title=\"Recent withdrawals / investments\" description=\"Latest 20 records\">\n            {withdraws.isLoading ? (\n              <SkeletonList rows={4} />\n            ) : withdraws.data?.length ? (\n              <div className=\"space-y-2 max-h-72 overflow-auto pr-1\">\n                {withdraws.data.map((tx) => (\n                  <div key={tx._id} className=\"rounded-2xl border border-slate-200 dark:border-slate-800 p-3 flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm font-semibold text-slate-900 dark:text-white\">{tx.note || \"Withdrawal\"}</p>\n                      <p className=\"text-xs text-slate-500 dark:text-slate-400\">{new Date(tx.occurredAt).toLocaleDateString(\"en-BD\")}</p>\n                    </div>\n                    <p className=\"text-sm font-semibold text-rose-600 dark:text-rose-300\">{formatBDT(Math.abs(tx.amount || 0))}</p>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <p className=\"text-sm text-slate-500\">No withdrawals recorded yet.</p>\n            )}\n          </Panel>\n        </div>\n\n        <Panel title=\"Investments overview\" description=\"Funds currently out of circulation.\">\n          {investments.isLoading ? (\n            <SkeletonList rows={3} />\n          ) : investments.data?.length ? (\n            <div className=\"grid grid-cols-1 gap-3 sm:grid-cols-2\">\n              {investments.data.map((inv) => {\n                const returned = inv.returnedPoisha || 0;\n                const total = inv.amountPoisha + (inv.expectedInterestPoisha || 0);\n                const pct = total ? Math.min(100, Math.round((returned / total) * 100)) : 0;\n                return (\n                  <div key={inv.id} className=\"rounded-2xl border border-slate-200 dark:border-slate-800 p-4 space-y-2\">\n                    <div className=\"flex items-center justify-between\">\n                      <p className=\"font-semibold text-slate-900 dark:text-white\">{inv.name}</p>\n                      <span className=\"text-xs px-2 py-0.5 rounded-full border border-slate-200 dark:border-slate-700 text-slate-500 dark:text-slate-300\">\n                        {inv.status === \"completed\" ? \"Completed\" : \"Active\"}\n                      </span>\n                    </div>\n                    <p className=\"text-sm text-slate-500 dark:text-slate-400\">Principal: {formatBDT(inv.amountPoisha)}</p>\n                    <div className=\"text-xs text-slate-500 dark:text-slate-400\">\n                      Returned {formatBDT(returned)} of {formatBDT(total)} ({pct}%)\n                    </div>\n                    <div className=\"w-full h-1.5 rounded-full bg-slate-100 dark:bg-slate-800 overflow-hidden\">\n                      <div className=\"h-full bg-emerald-500\" style={{ width: `${pct}%` }} />\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          ) : (\n            <p className=\"text-sm text-slate-500\">No investments recorded yet.</p>\n          )}\n        </Panel>\n      </div>\n    </motion.div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3421, "column": 0}, "map": {"version":3,"sources":["file:///home/robin/mca/web/src/components/home/YearlyPeek.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { api, formatBDT } from \"@/lib/clientApi\";\n\nexport default function YearlyPeek() {\n  const router = useRouter();\n  const currentYear = new Date().getFullYear();\n  const years = [currentYear, currentYear - 1];\n  const [totals, setTotals] = useState<Record<number, number>>({});\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    let cancelled = false;\n    async function load() {\n      setLoading(true);\n      setError(null);\n      try {\n        const results = await Promise.all(\n          years.map(async (year) => {\n            const res = await api.get(\"/reports/yearly-collection\", { params: { year } });\n            return { year, total: res.data?.total ?? 0 };\n          })\n        );\n        if (!cancelled) {\n          setTotals(results.reduce((acc, item) => ({ ...acc, [item.year]: item.total }), {}));\n        }\n      } catch (err: any) {\n        if (!cancelled) setError(err?.response?.data?.error || \"Failed to load yearly totals\");\n      } finally {\n        if (!cancelled) setLoading(false);\n      }\n    }\n    load();\n    return () => {\n      cancelled = true;\n    };\n  }, [currentYear]);\n\n  return (\n    <section className=\"space-y-3\">\n      <p className=\"text-xs uppercase tracking-[0.3em] text-slate-400\">Yearly collection</p>\n      <div className=\"grid grid-cols-1 gap-3 sm:grid-cols-2\">\n        {years.map((year) => {\n          const total = totals[year];\n          return (\n            <button\n              key={year}\n              type=\"button\"\n              onClick={() => router.push(`/yearly?year=${year}`)}\n              className=\"text-left rounded-2xl border border-slate-200 dark:border-slate-800 bg-white/80 dark:bg-slate-900/70 p-4 shadow-sm transition hover:shadow-md focus:outline-none focus:ring-2 focus:ring-blue-400/40\"\n            >\n              <p className=\"text-xs uppercase tracking-[0.3em] text-slate-400\">Collection year</p>\n              <p className=\"text-2xl font-semibold text-slate-900 dark:text-white mt-1\">{year}</p>\n              <p className=\"text-sm text-slate-500 dark:text-slate-400 mt-2\">\n                {typeof total === \"number\" ? formatBDT(total) : loading ? \"Loading…\" : \"Tap to view details\"}\n              </p>\n            </button>\n          );\n        })}\n      </div>\n      {error ? <p className=\"text-sm text-rose-500\">{error}</p> : null}\n    </section>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAAA;AAHA;;;;;AAKe,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,cAAc,IAAI,OAAO,WAAW;IAC1C,MAAM,QAAQ;QAAC;QAAa,cAAc;KAAE;IAC5C,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAyB,CAAC;IAC9D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAElD,IAAA,kNAAS,EAAC;QACR,IAAI,YAAY;QAChB,eAAe;YACb,WAAW;YACX,SAAS;YACT,IAAI;gBACF,MAAM,UAAU,MAAM,QAAQ,GAAG,CAC/B,MAAM,GAAG,CAAC,OAAO;oBACf,MAAM,MAAM,MAAM,8IAAG,CAAC,GAAG,CAAC,8BAA8B;wBAAE,QAAQ;4BAAE;wBAAK;oBAAE;oBAC3E,OAAO;wBAAE;wBAAM,OAAO,IAAI,IAAI,EAAE,SAAS;oBAAE;gBAC7C;gBAEF,IAAI,CAAC,WAAW;oBACd,UAAU,QAAQ,MAAM,CAAC,CAAC,KAAK,OAAS,CAAC;4BAAE,GAAG,GAAG;4BAAE,CAAC,KAAK,IAAI,CAAC,EAAE,KAAK,KAAK;wBAAC,CAAC,GAAG,CAAC;gBAClF;YACF,EAAE,OAAO,KAAU;gBACjB,IAAI,CAAC,WAAW,SAAS,KAAK,UAAU,MAAM,SAAS;YACzD,SAAU;gBACR,IAAI,CAAC,WAAW,WAAW;YAC7B;QACF;QACA;QACA,OAAO;YACL,YAAY;QACd;IACF,GAAG;QAAC;KAAY;IAEhB,qBACE,8OAAC;QAAQ,WAAU;;0BACjB,8OAAC;gBAAE,WAAU;0BAAoD;;;;;;0BACjE,8OAAC;gBAAI,WAAU;0BACZ,MAAM,GAAG,CAAC,CAAC;oBACV,MAAM,QAAQ,MAAM,CAAC,KAAK;oBAC1B,qBACE,8OAAC;wBAEC,MAAK;wBACL,SAAS,IAAM,OAAO,IAAI,CAAC,CAAC,aAAa,EAAE,MAAM;wBACjD,WAAU;;0CAEV,8OAAC;gCAAE,WAAU;0CAAoD;;;;;;0CACjE,8OAAC;gCAAE,WAAU;0CAA8D;;;;;;0CAC3E,8OAAC;gCAAE,WAAU;0CACV,OAAO,UAAU,WAAW,IAAA,iIAAS,EAAC,SAAS,UAAU,aAAa;;;;;;;uBARpE;;;;;gBAYX;;;;;;YAED,sBAAQ,8OAAC;gBAAE,WAAU;0BAAyB;;;;;uBAAa;;;;;;;AAGlE","debugId":null}},
    {"offset": {"line": 3556, "column": 0}, "map": {"version":3,"sources":["file:///home/robin/mca/web/src/components/home/HomeClient.tsx"],"sourcesContent":["\"use client\";\nimport { useMemo, useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport Panel from \"@/components/Panel\";\nimport StatCard from \"@/components/StatCard\";\nimport MemberCard from \"@/components/MemberCard\";\nimport PageHeader from \"@/components/layout/PageHeader\";\nimport MemberDrawer from \"@/components/MemberDrawer\";\nimport TotalBalanceDrawer from \"@/components/home/TotalBalanceDrawer\";\nimport YearlyPeek from \"@/components/home/YearlyPeek\";\nimport { api } from \"@/lib/clientApi\";\nimport { formatBDT } from \"@/lib/format\";\nimport type { ServerMe } from \"@/lib/server/me\";\nimport type { HomeResponse, MemberSummary } from \"@/types/home\";\nimport { useRouter } from \"next/navigation\";\nimport { AnimatePresence } from \"framer-motion\";\n\ntype Props = {\n  initialData: HomeResponse;\n  me: ServerMe;\n};\n\nconst STALE_TIME = 30_000;\n\nexport default function HomeClient({ initialData, me }: Props) {\n  const router = useRouter();\n  const [drawerUserId, setDrawerUserId] = useState<string | null>(null);\n  const [showTotalsDrawer, setShowTotalsDrawer] = useState(false);\n  const home = useQuery<HomeResponse>({\n    queryKey: [\"home\"],\n    queryFn: async () => (await api.get(\"/home\")).data,\n    initialData,\n    staleTime: STALE_TIME,\n    gcTime: STALE_TIME * 4,\n    refetchOnWindowFocus: false,\n  });\n  const data = home.data;\n  const isRefreshing = home.isFetching && !!home.data;\n\n  const duesQuery = useQuery<any[]>({\n    queryKey: [\"dues\", me.id],\n    queryFn: async () => (await api.get(`/users/${me.id}/dues`)).data,\n    enabled: me.role === \"user\" && !!me.id,\n    staleTime: STALE_TIME,\n    refetchOnWindowFocus: false,\n  });\n\n  const userTxsQuery = useQuery<any[]>({\n    queryKey: [\"txs\", me.id, 12],\n    queryFn: async () => (await api.get(\"/transactions\", { params: { userId: me.id, limit: 20 } })).data,\n    enabled: me.role === \"user\" && !!me.id,\n    staleTime: STALE_TIME,\n    refetchOnWindowFocus: false,\n  });\n\n  const nextEmi = useMemo(() => {\n    if (me.role !== \"user\" || !duesQuery.data) return 0;\n    let soonest: number | null = null;\n    for (const due of duesQuery.data) {\n      for (const item of due.schedule) {\n        if (item.status === \"paid\") continue;\n        const remaining = (item.totalDuePoisha || 0) - (item.paidPoisha || 0);\n        if (remaining <= 0) continue;\n        soonest = remaining;\n        break;\n      }\n      if (soonest) break;\n    }\n    return soonest || 0;\n  }, [duesQuery.data, me.role]);\n\n  if (!data) return null;\n\n  if (me.role === \"user\" && data.cards.length) {\n    const card = data.cards[0];\n    const recent = userTxsQuery.data || card.recent || [];\n    return (\n      <div className=\"space-y-6\">\n        <PageHeader\n          eyebrow=\"My savings\"\n          title={`Hi ${me.name || \"there\"}, here’s the current picture`}\n          description=\"Balance, what you’ve contributed so far, and upcoming instalments if any are still pending.\"\n        />\n\n        <div className=\"grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3\">\n          <StatCard label=\"Savings balance\" value={formatBDT(data.groupBalance)} />\n          <StatCard label=\"Total contributed\" value={formatBDT(data.totalDeposits)} />\n          {nextEmi > 0 ? <StatCard label=\"Next payment due\" value={formatBDT(nextEmi)} helper=\"Covers your oldest pending instalment\" /> : null}\n        </div>\n\n        {isRefreshing ? <p className=\"text-xs text-slate-500\">Refreshing your dashboard…</p> : null}\n\n        <Panel title=\"Recent activity\" description=\"Only transactions tied to your name appear here.\">\n          <div className=\"grid grid-cols-12 text-xs text-slate-500 px-2\">\n            <div className=\"col-span-3\">Date</div>\n            <div className=\"col-span-5\">Details</div>\n            <div className=\"col-span-4 text-right\">Amount</div>\n          </div>\n          <div className=\"max-h-72 overflow-auto divide-y divide-slate-100 dark:divide-slate-800\">\n            {recent.length\n              ? recent.map((tx: any) => (\n                  <div key={tx._id || tx.date} className=\"grid grid-cols-12 items-center py-2 px-2 text-sm\">\n                    <span className=\"col-span-3\">{new Date(tx.occurredAt || tx.date).toLocaleDateString(\"en-BD\")}</span>\n                    <span className={`col-span-5 ${tx.type === \"deposit\" ? \"text-emerald-600\" : \"text-rose-600\"}`}>{tx.note || tx.type}</span>\n                    <span className=\"col-span-4 text-right\">{formatBDT(tx.amount)}</span>\n                  </div>\n                ))\n              : (\n                <div className=\"text-sm text-slate-500 px-2 py-3\">No transactions recorded yet.</div>\n              )}\n          </div>\n        </Panel>\n      </div>\n    );\n  }\n\n  const summaryStats = useMemo(() => {\n    if (!data) return [];\n    const stats: Array<{ label: string; value: string | number; helper?: string; onClick?: () => void }> = [\n      {\n        label: \"Total balance\",\n        value: formatBDT(data.groupBalance),\n        helper: \"Tap to compare deposits vs. deductions\",\n        onClick: () => setShowTotalsDrawer(true),\n      },\n      {\n        label: \"Available cash\",\n        value: formatBDT(data.groupBalance),\n        helper: \"See every member’s balance\",\n        onClick: () => router.push(\"/balances\"),\n      },\n      { label: \"Active members\", value: data.membersCount, helper: \"Counting only active profiles\" },\n      { label: \"Open dues\", value: data.arrearsCount, helper: \"Members behind on instalments\" },\n    ];\n    const investmentInfo = data.investments || { principal: 0, expectedInterest: 0 };\n    stats.push(\n      { label: \"Invested funds\", value: formatBDT(investmentInfo.principal), helper: \"Currently out earning returns\" },\n      { label: \"Expected interest\", value: formatBDT(investmentInfo.expectedInterest) },\n      { label: \"Total collected\", value: formatBDT(data.totalDeposits) }\n    );\n    return stats;\n  }, [data, router]);\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"grid grid-cols-1 gap-3 sm:grid-cols-2 xl:grid-cols-4\">\n        {summaryStats.map((stat) => (\n          <StatCard key={String(stat.label)} label={stat.label} value={stat.value} helper={stat.helper} onClick={stat.onClick} />\n        ))}\n      </div>\n\n      {me.role !== \"user\" ? <YearlyPeek /> : null}\n\n      {isRefreshing ? <p className=\"text-xs text-slate-500\">Refreshing data…</p> : null}\n\n      <Panel title=\"Members at a glance\" description=\"Open any member to record deposits, withdrawals, or review their ledger.\">\n        <div className=\"grid grid-cols-1 gap-3 sm:grid-cols-2 xl:grid-cols-3\">\n          {data.cards.map((card) => (\n            <MemberCard key={card.userId} member={card} onSelect={(id) => setDrawerUserId(id)} />\n          ))}\n        </div>\n      </Panel>\n\n      <AnimatePresence>\n        {drawerUserId ? <MemberDrawer userId={drawerUserId} role={me.role} onClose={() => setDrawerUserId(null)} /> : null}\n      </AnimatePresence>\n      <AnimatePresence>\n        {showTotalsDrawer ? (\n          <TotalBalanceDrawer\n            open={showTotalsDrawer}\n            totalDeposits={data.totalDeposits}\n            totalWithdraws={data.totalWithdraws}\n            available={data.groupBalance}\n            rows={data.cards}\n            onClose={() => setShowTotalsDrawer(false)}\n          />\n        ) : null}\n      </AnimatePresence>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAfA;;;;;;;;;;;;;;;AAsBA,MAAM,aAAa;AAEJ,SAAS,WAAW,EAAE,WAAW,EAAE,EAAE,EAAS;IAC3D,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAgB;IAChE,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,iNAAQ,EAAC;IACzD,MAAM,OAAO,IAAA,uLAAQ,EAAe;QAClC,UAAU;YAAC;SAAO;QAClB,SAAS,UAAY,CAAC,MAAM,8IAAG,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI;QAClD;QACA,WAAW;QACX,QAAQ,aAAa;QACrB,sBAAsB;IACxB;IACA,MAAM,OAAO,KAAK,IAAI;IACtB,MAAM,eAAe,KAAK,UAAU,IAAI,CAAC,CAAC,KAAK,IAAI;IAEnD,MAAM,YAAY,IAAA,uLAAQ,EAAQ;QAChC,UAAU;YAAC;YAAQ,GAAG,EAAE;SAAC;QACzB,SAAS,UAAY,CAAC,MAAM,8IAAG,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,GAAG,EAAE,CAAC,KAAK,CAAC,CAAC,EAAE,IAAI;QACjE,SAAS,GAAG,IAAI,KAAK,UAAU,CAAC,CAAC,GAAG,EAAE;QACtC,WAAW;QACX,sBAAsB;IACxB;IAEA,MAAM,eAAe,IAAA,uLAAQ,EAAQ;QACnC,UAAU;YAAC;YAAO,GAAG,EAAE;YAAE;SAAG;QAC5B,SAAS,UAAY,CAAC,MAAM,8IAAG,CAAC,GAAG,CAAC,iBAAiB;gBAAE,QAAQ;oBAAE,QAAQ,GAAG,EAAE;oBAAE,OAAO;gBAAG;YAAE,EAAE,EAAE,IAAI;QACpG,SAAS,GAAG,IAAI,KAAK,UAAU,CAAC,CAAC,GAAG,EAAE;QACtC,WAAW;QACX,sBAAsB;IACxB;IAEA,MAAM,UAAU,IAAA,gNAAO,EAAC;QACtB,IAAI,GAAG,IAAI,KAAK,UAAU,CAAC,UAAU,IAAI,EAAE,OAAO;QAClD,IAAI,UAAyB;QAC7B,KAAK,MAAM,OAAO,UAAU,IAAI,CAAE;YAChC,KAAK,MAAM,QAAQ,IAAI,QAAQ,CAAE;gBAC/B,IAAI,KAAK,MAAM,KAAK,QAAQ;gBAC5B,MAAM,YAAY,CAAC,KAAK,cAAc,IAAI,CAAC,IAAI,CAAC,KAAK,UAAU,IAAI,CAAC;gBACpE,IAAI,aAAa,GAAG;gBACpB,UAAU;gBACV;YACF;YACA,IAAI,SAAS;QACf;QACA,OAAO,WAAW;IACpB,GAAG;QAAC,UAAU,IAAI;QAAE,GAAG,IAAI;KAAC;IAE5B,IAAI,CAAC,MAAM,OAAO;IAElB,IAAI,GAAG,IAAI,KAAK,UAAU,KAAK,KAAK,CAAC,MAAM,EAAE;QAC3C,MAAM,OAAO,KAAK,KAAK,CAAC,EAAE;QAC1B,MAAM,SAAS,aAAa,IAAI,IAAI,KAAK,MAAM,IAAI,EAAE;QACrD,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC,qJAAU;oBACT,SAAQ;oBACR,OAAO,CAAC,GAAG,EAAE,GAAG,IAAI,IAAI,QAAQ,4BAA4B,CAAC;oBAC7D,aAAY;;;;;;8BAGd,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,yIAAQ;4BAAC,OAAM;4BAAkB,OAAO,IAAA,iIAAS,EAAC,KAAK,YAAY;;;;;;sCACpE,8OAAC,yIAAQ;4BAAC,OAAM;4BAAoB,OAAO,IAAA,iIAAS,EAAC,KAAK,aAAa;;;;;;wBACtE,UAAU,kBAAI,8OAAC,yIAAQ;4BAAC,OAAM;4BAAmB,OAAO,IAAA,iIAAS,EAAC;4BAAU,QAAO;;;;;mCAA6C;;;;;;;gBAGlI,6BAAe,8OAAC;oBAAE,WAAU;8BAAyB;;;;;2BAAiC;8BAEvF,8OAAC,sIAAK;oBAAC,OAAM;oBAAkB,aAAY;;sCACzC,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;8CAAa;;;;;;8CAC5B,8OAAC;oCAAI,WAAU;8CAAa;;;;;;8CAC5B,8OAAC;oCAAI,WAAU;8CAAwB;;;;;;;;;;;;sCAEzC,8OAAC;4BAAI,WAAU;sCACZ,OAAO,MAAM,GACV,OAAO,GAAG,CAAC,CAAC,mBACV,8OAAC;oCAA4B,WAAU;;sDACrC,8OAAC;4CAAK,WAAU;sDAAc,IAAI,KAAK,GAAG,UAAU,IAAI,GAAG,IAAI,EAAE,kBAAkB,CAAC;;;;;;sDACpF,8OAAC;4CAAK,WAAW,CAAC,WAAW,EAAE,GAAG,IAAI,KAAK,YAAY,qBAAqB,iBAAiB;sDAAG,GAAG,IAAI,IAAI,GAAG,IAAI;;;;;;sDAClH,8OAAC;4CAAK,WAAU;sDAAyB,uIAAU,GAAG,MAAM;;;;;;;mCAHpD,GAAG,GAAG,IAAI,GAAG,IAAI;;;;0DAO7B,8OAAC;gCAAI,WAAU;0CAAmC;;;;;;;;;;;;;;;;;;;;;;;IAMhE;IAEA,MAAM,eAAe,IAAA,gNAAO,EAAC;QAC3B,IAAI,CAAC,MAAM,OAAO,EAAE;QACpB,MAAM,QAAiG;YACrG;gBACE,OAAO;gBACP,OAAO,IAAA,iIAAS,EAAC,KAAK,YAAY;gBAClC,QAAQ;gBACR,SAAS,IAAM,oBAAoB;YACrC;YACA;gBACE,OAAO;gBACP,OAAO,IAAA,iIAAS,EAAC,KAAK,YAAY;gBAClC,QAAQ;gBACR,SAAS,IAAM,OAAO,IAAI,CAAC;YAC7B;YACA;gBAAE,OAAO;gBAAkB,OAAO,KAAK,YAAY;gBAAE,QAAQ;YAAgC;YAC7F;gBAAE,OAAO;gBAAa,OAAO,KAAK,YAAY;gBAAE,QAAQ;YAAgC;SACzF;QACD,MAAM,iBAAiB,KAAK,WAAW,IAAI;YAAE,WAAW;YAAG,kBAAkB;QAAE;QAC/E,MAAM,IAAI,CACR;YAAE,OAAO;YAAkB,OAAO,IAAA,iIAAS,EAAC,eAAe,SAAS;YAAG,QAAQ;QAAgC,GAC/G;YAAE,OAAO;YAAqB,OAAO,IAAA,iIAAS,EAAC,eAAe,gBAAgB;QAAE,GAChF;YAAE,OAAO;YAAmB,OAAO,IAAA,iIAAS,EAAC,KAAK,aAAa;QAAE;QAEnE,OAAO;IACT,GAAG;QAAC;QAAM;KAAO;IAEjB,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACZ,aAAa,GAAG,CAAC,CAAC,qBACjB,8OAAC,yIAAQ;wBAA0B,OAAO,KAAK,KAAK;wBAAE,OAAO,KAAK,KAAK;wBAAE,QAAQ,KAAK,MAAM;wBAAE,SAAS,KAAK,OAAO;uBAApG,OAAO,KAAK,KAAK;;;;;;;;;;YAInC,GAAG,IAAI,KAAK,uBAAS,8OAAC,mJAAU;;;;uBAAM;YAEtC,6BAAe,8OAAC;gBAAE,WAAU;0BAAyB;;;;;uBAAuB;0BAE7E,8OAAC,sIAAK;gBAAC,OAAM;gBAAsB,aAAY;0BAC7C,cAAA,8OAAC;oBAAI,WAAU;8BACZ,KAAK,KAAK,CAAC,GAAG,CAAC,CAAC,qBACf,8OAAC,2IAAU;4BAAmB,QAAQ;4BAAM,UAAU,CAAC,KAAO,gBAAgB;2BAA7D,KAAK,MAAM;;;;;;;;;;;;;;;0BAKlC,8OAAC,4MAAe;0BACb,6BAAe,8OAAC,6IAAY;oBAAC,QAAQ;oBAAc,MAAM,GAAG,IAAI;oBAAE,SAAS,IAAM,gBAAgB;;;;;2BAAY;;;;;;0BAEhH,8OAAC,4MAAe;0BACb,iCACC,8OAAC,2JAAkB;oBACjB,MAAM;oBACN,eAAe,KAAK,aAAa;oBACjC,gBAAgB,KAAK,cAAc;oBACnC,WAAW,KAAK,YAAY;oBAC5B,MAAM,KAAK,KAAK;oBAChB,SAAS,IAAM,oBAAoB;;;;;2BAEnC;;;;;;;;;;;;AAIZ","debugId":null}}]
}