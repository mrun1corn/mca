module.exports=[90075,a=>{"use strict";function b(a){return new Intl.NumberFormat("en-BD",{style:"currency",currency:"BDT"}).format((a||0)/100)}a.s(["formatBDT",()=>b])},7078,a=>{"use strict";var b=a.i(87924);let c={primary:"bg-blue-600 text-white hover:bg-blue-500",secondary:"bg-white border border-blue-200 text-blue-700 hover:bg-blue-50",ghost:"bg-transparent text-slate-600 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800",danger:"bg-rose-600 text-white hover:bg-rose-500"};function d({variant:a="primary",className:d="",...e}){return(0,b.jsx)("button",{className:`inline-flex items-center justify-center gap-1.5 rounded-lg px-4 py-2 text-sm font-medium transition disabled:opacity-50 disabled:cursor-not-allowed ${c[a]} ${d}`,...e})}a.s(["default",()=>d])},42292,a=>{"use strict";var b=a.i(87924);function c({title:a,description:c,actions:d,children:e,className:f=""}){return(0,b.jsxs)("section",{className:`rounded-2xl border border-[#EADAFB]/70 dark:border-[#2b1f4a] bg-gradient-to-br from-[#FFFFFF] via-[#FCEBFF]/80 to-[#FED2E2]/70 dark:from-[#23143E]/90 dark:via-[#1C1033]/70 dark:to-[#120A23]/70 p-5 shadow-md transition-shadow hover:shadow-xl ${f}`.trim(),children:[(a||c||d)&&(0,b.jsxs)("header",{className:"mb-4 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{children:[a?(0,b.jsx)("h2",{className:"text-base sm:text-lg font-semibold text-slate-900 dark:text-white",children:a}):null,c?(0,b.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:c}):null]}),d?(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:d}):null]}),(0,b.jsx)("div",{className:"space-y-4",children:e})]})}a.s(["default",()=>c])},9751,a=>{"use strict";var b=a.i(72131);function c(a){(0,b.useEffect)(()=>{if(!a)return;let b=document.body.style.overflow,c=document.body.style.paddingRight,d=window.innerWidth-document.documentElement.clientWidth;return document.body.style.overflow="hidden",d>0&&(document.body.style.paddingRight=`${d}px`),()=>{document.body.style.overflow=b,document.body.style.paddingRight=c}},[a])}a.s(["useLockBodyScroll",()=>c])},45263,a=>{"use strict";var b=a.i(87924);function c({className:a=""}){return(0,b.jsx)("div",{className:`h-3 bg-gray-200/80 rounded animate-pulse ${a}`})}function d({rows:a=4,className:d=""}){return(0,b.jsx)("div",{className:`space-y-2 ${d}`,children:Array.from({length:a}).map((a,d)=>(0,b.jsxs)("div",{className:"bg-white/70 dark:bg-slate-900/40 border border-slate-100 dark:border-slate-800 rounded-xl p-3 space-y-2 animate-pulse",children:[(0,b.jsx)(c,{className:"w-2/3"}),(0,b.jsx)(c,{className:"w-1/3"})]},`skeleton-row-${d}`))})}function e({rows:a=4}){return(0,b.jsx)("div",{className:"space-y-2",children:Array.from({length:a}).map((a,d)=>(0,b.jsxs)("div",{className:"grid grid-cols-12 gap-2 items-center",children:[(0,b.jsx)(c,{className:"col-span-3 h-3"}),(0,b.jsx)(c,{className:"col-span-4 h-3"}),(0,b.jsx)(c,{className:"col-span-3 h-3"}),(0,b.jsx)(c,{className:"col-span-2 h-3"})]},`skeleton-table-${d}`))})}a.s(["SkeletonList",()=>d,"SkeletonTableRows",()=>e])},94398,a=>{"use strict";var b=a.i(87924),c=a.i(19032),d=a.i(7078),e=a.i(42292),f=a.i(90075),g=a.i(72131),h=a.i(45263),i=a.i(9751);function j({initialUsers:a,isAdmin:j}){let[k,l]=(0,g.useState)(""),[m,n]=(0,g.useState)(a),[o,p]=(0,g.useState)(a),[q,r]=(0,g.useState)(!1),[s,t]=(0,g.useState)({name:"",email:"",role:"user"}),[u,v]=(0,g.useState)(null),[w,x]=(0,g.useState)(null),[y,z]=(0,g.useState)(!1);(0,i.useLockBodyScroll)(!!u);let A=async()=>{let a=await fetch(`${(0,c.getBrowserApiBase)()}/users`,{credentials:"include"});if(!a.ok)throw Error("Failed to load members");let b=await a.json();return n(b),k.trim()||p(b),b};(0,g.useEffect)(()=>{let a=k.trim();if(!a){z(!1),p(m);return}let b=new AbortController;z(!0);let d=setTimeout(async()=>{try{let d=await fetch(`${(0,c.getBrowserApiBase)()}/users?q=${encodeURIComponent(a)}`,{credentials:"include",signal:b.signal});if(!d.ok)throw Error("Failed to search members");let e=await d.json();p(e)}catch(a){a?.name!=="AbortError"&&x(a?.message||"Failed to search members")}finally{z(!1)}},250);return()=>{b.abort(),clearTimeout(d)}},[k,m]);let B=async()=>{if(s.name.trim()){r(!0),x(null);try{let a=await fetch(`${(0,c.getBrowserApiBase)()}/users`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({...s,password:"ChangeMe123!"})});if(!a.ok)throw Error((await a.json())?.error||"Failed to create");t({name:"",email:"",role:"user"}),l(""),await A()}catch(a){x(a?.message||"Failed to create")}finally{r(!1)}}},C=async()=>{if(u){r(!0),x(null);try{let a=await fetch(`${(0,c.getBrowserApiBase)()}/users/${u.id}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:u.name,email:u.email,role:u.role})});if(!a.ok)throw Error((await a.json())?.error||"Failed to update");v(null),await A()}catch(a){x(a?.message||"Failed to update")}finally{r(!1)}}},D=async a=>{if(confirm("Delete this member?")){r(!0),x(null);try{let b=await fetch(`${(0,c.getBrowserApiBase)()}/users/${a}`,{method:"DELETE",credentials:"include"});if(!b.ok)throw Error((await b.json())?.error||"Failed to delete");await A()}catch(a){x(a?.message||"Failed to delete")}finally{r(!1)}}},E=(0,g.useMemo)(()=>o,[o]);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsx)("input",{className:"w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white/80 dark:bg-slate-900/60 px-4 py-2",placeholder:"Search members…",value:k,onChange:a=>l(a.target.value)}),w?(0,b.jsx)("p",{className:"text-sm text-rose-500",children:w}):null,q?(0,b.jsx)("p",{className:"text-xs text-slate-500",children:"Loading…"}):null]}),j&&(0,b.jsx)(e.default,{title:"Add someone new",description:"Admins can invite new members or staff.",actions:(0,b.jsx)(d.default,{onClick:B,disabled:!s.name.trim()||q,children:"Add member"}),children:(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Full name"}),(0,b.jsx)("input",{className:"input-like",value:s.name,onChange:a=>t(b=>({...b,name:a.target.value}))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Email"}),(0,b.jsx)("input",{className:"input-like",value:s.email,onChange:a=>t(b=>({...b,email:a.target.value}))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Role"}),(0,b.jsxs)("select",{className:"input-like",value:s.role,onChange:a=>t(b=>({...b,role:a.target.value})),children:[(0,b.jsx)("option",{value:"user",children:"Member"}),(0,b.jsx)("option",{value:"accountant",children:"Accountant"}),(0,b.jsx)("option",{value:"admin",children:"Admin"})]})]})]})}),(0,b.jsx)(e.default,{title:"Everyone in the circle",description:`${E.length} member${1===E.length?"":"s"}`,children:y?(0,b.jsx)(h.SkeletonList,{rows:3}):(0,b.jsxs)("div",{className:"space-y-3",children:[E.map(a=>(0,b.jsxs)("div",{className:"rounded-2xl border border-slate-200 dark:border-slate-800 p-4 flex flex-col gap-2 bg-white/90 dark:bg-slate-900/60",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold text-slate-900 dark:text-white",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:a.email||"No email"})]}),(0,b.jsxs)("div",{className:"text-right text-sm text-slate-500 dark:text-slate-400",children:[(0,b.jsxs)("div",{children:["Balance ",(0,f.formatBDT)(a.balance||0)]}),(0,b.jsxs)("div",{children:["Last month ",(0,f.formatBDT)(a.lastMonth||0)]})]})]}),j?(0,b.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,b.jsx)(d.default,{variant:"ghost",onClick:()=>v(a),children:"Edit"}),(0,b.jsx)(d.default,{variant:"danger",onClick:()=>D(a.id),children:"Delete"})]}):null]},a.id)),!E.length&&(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"No members match your search."})]})}),u?(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/10",onClick:()=>v(null),children:(0,b.jsxs)("div",{className:"w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-700 bg-white/85 dark:bg-slate-950/75 backdrop-blur-sm p-5 space-y-3 transform-gpu transition",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Edit member"}),(0,b.jsx)("input",{className:"input-like",value:u.name,onChange:a=>v(b=>b?{...b,name:a.target.value}:b)}),(0,b.jsx)("input",{className:"input-like",value:u.email||"",onChange:a=>v(b=>b?{...b,email:a.target.value}:b)}),(0,b.jsxs)("select",{className:"input-like",value:u.role,onChange:a=>v(b=>b?{...b,role:a.target.value}:b),children:[(0,b.jsx)("option",{value:"user",children:"Member"}),(0,b.jsx)("option",{value:"accountant",children:"Accountant"}),(0,b.jsx)("option",{value:"admin",children:"Admin"})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:[(0,b.jsx)(d.default,{variant:"ghost",onClick:()=>v(null),children:"Cancel"}),(0,b.jsx)(d.default,{onClick:C,disabled:q,children:"Save changes"})]})]})}):null]})}a.s(["default",()=>j])}];

//# sourceMappingURL=src_b4309ef8._.js.map