(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75379,e=>{"use strict";function t(e){return new Intl.NumberFormat("en-BD",{style:"currency",currency:"BDT"}).format((e||0)/100)}e.s(["formatBDT",()=>t])},10007,e=>{"use strict";var t=e.i(43476),a=e.i(932);let s={primary:"bg-blue-600 text-white hover:bg-blue-500",secondary:"bg-white border border-blue-200 text-blue-700 hover:bg-blue-50",ghost:"bg-transparent text-slate-600 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800",danger:"bg-rose-600 text-white hover:bg-rose-500"};function l(e){let l,r,i,n,d=(0,a.c)(7);d[0]!==e?({variant:r,className:i,...l}=e,d[0]=e,d[1]=l,d[2]=r,d[3]=i):(l=d[1],r=d[2],i=d[3]);let o=void 0===r?"primary":r,c=void 0===i?"":i,m=`inline-flex items-center justify-center gap-1.5 rounded-lg px-4 py-2 text-sm font-medium transition disabled:opacity-50 disabled:cursor-not-allowed ${s[o]} ${c}`;return d[4]!==l||d[5]!==m?(n=(0,t.jsx)("button",{className:m,...l}),d[4]=l,d[5]=m,d[6]=n):n=d[6],n}e.s(["default",()=>l])},45953,e=>{"use strict";var t=e.i(43476),a=e.i(932);function s(e){let s,l,r,i,n=(0,a.c)(12),{title:d,description:o,actions:c,children:m,className:u}=e,h=`rounded-2xl border border-[#EADAFB]/70 dark:border-[#2b1f4a] bg-gradient-to-br from-[#FFFFFF] via-[#FCEBFF]/80 to-[#FED2E2]/70 dark:from-[#23143E]/90 dark:via-[#1C1033]/70 dark:to-[#120A23]/70 p-5 shadow-md transition-shadow hover:shadow-xl ${void 0===u?"":u}`;return n[0]!==h?(s=h.trim(),n[0]=h,n[1]=s):s=n[1],n[2]!==c||n[3]!==o||n[4]!==d?(l=(d||o||c)&&(0,t.jsxs)("header",{className:"mb-4 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{children:[d?(0,t.jsx)("h2",{className:"text-base sm:text-lg font-semibold text-slate-900 dark:text-white",children:d}):null,o?(0,t.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:o}):null]}),c?(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:c}):null]}),n[2]=c,n[3]=o,n[4]=d,n[5]=l):l=n[5],n[6]!==m?(r=(0,t.jsx)("div",{className:"space-y-4",children:m}),n[6]=m,n[7]=r):r=n[7],n[8]!==s||n[9]!==l||n[10]!==r?(i=(0,t.jsxs)("section",{className:s,children:[l,r]}),n[8]=s,n[9]=l,n[10]=r,n[11]=i):i=n[11],i}e.s(["default",()=>s])},87350,e=>{"use strict";var t=e.i(932),a=e.i(71645);function s(e){let s,l,r=(0,t.c)(3);r[0]!==e?(s=()=>{if(!e)return;let t=document.body.style.overflow,a=document.body.style.paddingRight,s=window.innerWidth-document.documentElement.clientWidth;return document.body.style.overflow="hidden",s>0&&(document.body.style.paddingRight=`${s}px`),()=>{document.body.style.overflow=t,document.body.style.paddingRight=a}},l=[e],r[0]=e,r[1]=s,r[2]=l):(s=r[1],l=r[2]),(0,a.useEffect)(s,l)}e.s(["useLockBodyScroll",()=>s])},87246,e=>{"use strict";var t=e.i(43476),a=e.i(932);function s(e){let s,l=(0,a.c)(2),{className:r}=e,i=`h-3 bg-gray-200/80 rounded animate-pulse ${void 0===r?"":r}`;return l[0]!==i?(s=(0,t.jsx)("div",{className:i}),l[0]=i,l[1]=s):s=l[1],s}function l(e){let s,l,i=(0,a.c)(5),{rows:n,className:d}=e,o=void 0===n?4:n,c=`space-y-2 ${void 0===d?"":d}`;return i[0]!==o?(s=Array.from({length:o}).map(r),i[0]=o,i[1]=s):s=i[1],i[2]!==c||i[3]!==s?(l=(0,t.jsx)("div",{className:c,children:s}),i[2]=c,i[3]=s,i[4]=l):l=i[4],l}function r(e,a){return(0,t.jsxs)("div",{className:"bg-white/70 dark:bg-slate-900/40 border border-slate-100 dark:border-slate-800 rounded-xl p-3 space-y-2 animate-pulse",children:[(0,t.jsx)(s,{className:"w-2/3"}),(0,t.jsx)(s,{className:"w-1/3"})]},`skeleton-row-${a}`)}function i(e){let s,l=(0,a.c)(2),{rows:r}=e,i=void 0===r?4:r;return l[0]!==i?(s=(0,t.jsx)("div",{className:"space-y-2",children:Array.from({length:i}).map(n)}),l[0]=i,l[1]=s):s=l[1],s}function n(e,a){return(0,t.jsxs)("div",{className:"grid grid-cols-12 gap-2 items-center",children:[(0,t.jsx)(s,{className:"col-span-3 h-3"}),(0,t.jsx)(s,{className:"col-span-4 h-3"}),(0,t.jsx)(s,{className:"col-span-3 h-3"}),(0,t.jsx)(s,{className:"col-span-2 h-3"})]},`skeleton-table-${a}`)}e.s(["SkeletonList",()=>l,"SkeletonTableRows",()=>i])},84411,e=>{"use strict";var t=e.i(43476),a=e.i(9165),s=e.i(10007),l=e.i(45953),r=e.i(75379),i=e.i(71645),n=e.i(87246),d=e.i(87350);function o({initialUsers:e,isAdmin:o}){let[c,m]=(0,i.useState)(""),[u,h]=(0,i.useState)(e),[x,p]=(0,i.useState)(e),[b,g]=(0,i.useState)(!1),[f,j]=(0,i.useState)({name:"",email:"",role:"user"}),[v,y]=(0,i.useState)(null),[w,N]=(0,i.useState)(null),[k,C]=(0,i.useState)(!1);(0,d.useLockBodyScroll)(!!v);let A=async()=>{let e=await fetch(`${(0,a.getBrowserApiBase)()}/users`,{credentials:"include"});if(!e.ok)throw Error("Failed to load members");let t=await e.json();return h(t),c.trim()||p(t),t};(0,i.useEffect)(()=>{let e=c.trim();if(!e){C(!1),p(u);return}let t=new AbortController;C(!0);let s=setTimeout(async()=>{try{let s=await fetch(`${(0,a.getBrowserApiBase)()}/users?q=${encodeURIComponent(e)}`,{credentials:"include",signal:t.signal});if(!s.ok)throw Error("Failed to search members");let l=await s.json();p(l)}catch(e){e?.name!=="AbortError"&&N(e?.message||"Failed to search members")}finally{C(!1)}},250);return()=>{t.abort(),clearTimeout(s)}},[c,u]);let B=async()=>{if(f.name.trim()){g(!0),N(null);try{let e=await fetch(`${(0,a.getBrowserApiBase)()}/users`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({...f,password:"ChangeMe123!"})});if(!e.ok)throw Error((await e.json())?.error||"Failed to create");j({name:"",email:"",role:"user"}),m(""),await A()}catch(e){N(e?.message||"Failed to create")}finally{g(!1)}}},F=async()=>{if(v){g(!0),N(null);try{let e=await fetch(`${(0,a.getBrowserApiBase)()}/users/${v.id}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:v.name,email:v.email,role:v.role})});if(!e.ok)throw Error((await e.json())?.error||"Failed to update");y(null),await A()}catch(e){N(e?.message||"Failed to update")}finally{g(!1)}}},E=async e=>{if(confirm("Delete this member?")){g(!0),N(null);try{let t=await fetch(`${(0,a.getBrowserApiBase)()}/users/${e}`,{method:"DELETE",credentials:"include"});if(!t.ok)throw Error((await t.json())?.error||"Failed to delete");await A()}catch(e){N(e?.message||"Failed to delete")}finally{g(!1)}}},S=(0,i.useMemo)(()=>x,[x]);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("input",{className:"w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white/80 dark:bg-slate-900/60 px-4 py-2",placeholder:"Search members…",value:c,onChange:e=>m(e.target.value)}),w?(0,t.jsx)("p",{className:"text-sm text-rose-500",children:w}):null,b?(0,t.jsx)("p",{className:"text-xs text-slate-500",children:"Loading…"}):null]}),o&&(0,t.jsx)(l.default,{title:"Add someone new",description:"Admins can invite new members or staff.",actions:(0,t.jsx)(s.default,{onClick:B,disabled:!f.name.trim()||b,children:"Add member"}),children:(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Full name"}),(0,t.jsx)("input",{className:"input-like",value:f.name,onChange:e=>j(t=>({...t,name:e.target.value}))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Email"}),(0,t.jsx)("input",{className:"input-like",value:f.email,onChange:e=>j(t=>({...t,email:e.target.value}))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Role"}),(0,t.jsxs)("select",{className:"input-like",value:f.role,onChange:e=>j(t=>({...t,role:e.target.value})),children:[(0,t.jsx)("option",{value:"user",children:"Member"}),(0,t.jsx)("option",{value:"accountant",children:"Accountant"}),(0,t.jsx)("option",{value:"admin",children:"Admin"})]})]})]})}),(0,t.jsx)(l.default,{title:"Everyone in the circle",description:`${S.length} member${1===S.length?"":"s"}`,children:k?(0,t.jsx)(n.SkeletonList,{rows:3}):(0,t.jsxs)("div",{className:"space-y-3",children:[S.map(e=>(0,t.jsxs)("div",{className:"rounded-2xl border border-slate-200 dark:border-slate-800 p-4 flex flex-col gap-2 bg-white/90 dark:bg-slate-900/60",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-slate-900 dark:text-white",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:e.email||"No email"})]}),(0,t.jsxs)("div",{className:"text-right text-sm text-slate-500 dark:text-slate-400",children:[(0,t.jsxs)("div",{children:["Balance ",(0,r.formatBDT)(e.balance||0)]}),(0,t.jsxs)("div",{children:["Last month ",(0,r.formatBDT)(e.lastMonth||0)]})]})]}),o?(0,t.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,t.jsx)(s.default,{variant:"ghost",onClick:()=>y(e),children:"Edit"}),(0,t.jsx)(s.default,{variant:"danger",onClick:()=>E(e.id),children:"Delete"})]}):null]},e.id)),!S.length&&(0,t.jsx)("p",{className:"text-sm text-slate-500",children:"No members match your search."})]})}),v?(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/10",onClick:()=>y(null),children:(0,t.jsxs)("div",{className:"w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-700 bg-white/85 dark:bg-slate-950/75 backdrop-blur-sm p-5 space-y-3 transform-gpu transition",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Edit member"}),(0,t.jsx)("input",{className:"input-like",value:v.name,onChange:e=>y(t=>t?{...t,name:e.target.value}:t)}),(0,t.jsx)("input",{className:"input-like",value:v.email||"",onChange:e=>y(t=>t?{...t,email:e.target.value}:t)}),(0,t.jsxs)("select",{className:"input-like",value:v.role,onChange:e=>y(t=>t?{...t,role:e.target.value}:t),children:[(0,t.jsx)("option",{value:"user",children:"Member"}),(0,t.jsx)("option",{value:"accountant",children:"Accountant"}),(0,t.jsx)("option",{value:"admin",children:"Admin"})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:[(0,t.jsx)(s.default,{variant:"ghost",onClick:()=>y(null),children:"Cancel"}),(0,t.jsx)(s.default,{onClick:F,disabled:b,children:"Save changes"})]})]})}):null]})}e.s(["default",()=>o])}]);